{"componentChunkName":"component---src-templates-post-tsx","path":"/auto-update-dependencies-safely-github-actions/","result":{"data":{"site":{"siteMetadata":{"title":"ramonmorcillo.com"}},"markdownRemark":{"id":"e8574e35-770b-55c3-9aa4-bd5dcc0ab106","excerpt":"In Software Development keeping up to date with technology updates is crucial not only for developers who have to be always learning and renewing their set of skills but also for the projects they work on and have to be maintained. When you start a project from the ground you normally set it up with the libraries‚Äô latest stable versions. Then time goes by, and the size of the project grows, new features are added, new libraries too, and the version of the libraries and packages usually remains the same and almost never gets updated. And yes, why would you update them if the project works perfectly with the current ones?  Here are some reasons why you should keep your dependencies updated: Solving problems from old versions. Adding vulnerability fixes. Increase the overall performance. Add new features from them.  ‚Ä¶  When you keep the dependencies updated you are solving problems from older versions, improving the performance with new optimizations, and you are also able to use new features that other developers added to them. All of these contribute to increasing the maintainability of the code, and the overall project. We all have worked on projects where the dependencies have never (or rarely) been updated.  So how do we do it?  Well, first you can run  to see the latest releases of the packages you are currently using. You can then run  to update them (it will not update them to the major versions) but how do you know which ones will make the project break and which ones won‚Äôt?  Then there is the when, when should you update them? When should you check for updates? every day? every week? ‚Ä¶month? This is why I made this project, to learn about GitHub Actions and use it to have a safe way to automatically update the dependencies without making the project fail. The short explanation of this tutorial is about adding the Renovate app to check for dependencies updates and then submit Pull Requests to update them, this way we will abstract ourselves on checking for updates, so we can focus on more important things.  The point of using GitHub Actions is to set up a workflow and trigger it with every Pull Request to check that the build and tests pass with the updated dependencies before adding them to the project. Table of Contents Getting Started Set up GitHub Actions Workflow Add Renovate Conclusion Useful Resources Getting started Although this approach can be applied to any project we will use a React project made with Create React App as it will give us a‚Ä¶","html":"<p>In Software Development <strong>keeping up to date with technology updates</strong> is crucial not only for developers who have to be always learning and renewing their set of skills but also for the projects they work on and have to be maintained.</p>\n<p>When you start a project from the ground you normally set it up with the libraries‚Äô latest stable versions. Then time goes by, and the size of the project grows, new features are added, new libraries too, and <strong>the version of the libraries and packages usually remains the same and almost never gets updated</strong>. And yes, why would you update them if the project works perfectly with the current ones?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-personal-site/static/778df2c83a7cacf414a84954899ad782/b4294/this-is-fine.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAE/9oADAMBAAIQAxAAAAGu6wNVMt//xAAaEAACAwEBAAAAAAAAAAAAAAABAgASMwMi/9oACAEBAAEFAiBYNTo3qNq2hn//xAAWEQEBAQAAAAAAAAAAAAAAAAAAERL/2gAIAQMBAT8Byj//xAAYEQADAQEAAAAAAAAAAAAAAAAAAhEBUf/aAAgBAgEBPwHGhW6f/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAECEBESISL/2gAIAQEABj8CxOUXeiNf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITEQUWH/2gAIAQEAAT8hO8CyzyClh3Moiq0uuR7z/9oADAMBAAIAAwAAABBP7//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQMBAT8QCuWTl//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEVH/2gAIAQIBAT8QfKchjZ//xAAfEAABAwQDAQAAAAAAAAAAAAABABEhMUGBoVGRwbH/2gAIAQEAAT8QI4CAwZlLcovBGAAXegm4baadwER7mPa1fVUx4qufq//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"This is fine\"\n        title=\"This is fine\"\n        src=\"/gatsby-personal-site/static/778df2c83a7cacf414a84954899ad782/b4294/this-is-fine.jpg\"\n        srcset=\"/gatsby-personal-site/static/778df2c83a7cacf414a84954899ad782/cb69c/this-is-fine.jpg 320w,\n/gatsby-personal-site/static/778df2c83a7cacf414a84954899ad782/b4294/this-is-fine.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Here are some reasons why you should keep your dependencies updated:</p>\n<ul>\n<li>Solving problems from old versions.</li>\n<li>Adding vulnerability fixes.</li>\n<li>Increase the overall performance.</li>\n<li>Add new features from them. </li>\n<li>‚Ä¶</li>\n</ul>\n<p> When you keep the dependencies updated you are solving problems from older versions, improving the performance with new optimizations, and you are also able to use new features that other developers added to them. All of these contribute to increasing the <em>maintainability of the code</em>, and the overall project.</p>\n<p>We all have worked on projects where the dependencies have never (or rarely) been updated. </p>\n<p>So how do we do it? </p>\n<p>Well, first you can run <code class=\"language-text\">npm outdated</code> to <a href=\"https://docs.npmjs.com/cli/outdated\">see the latest releases</a> of the packages you are currently using.</p>\n<p>You can then run <code class=\"language-text\">npm update</code> to update them (it will not update them to the major versions) but how do you know which ones will make the project break and which ones won‚Äôt? </p>\n<p>Then there is the <em>when</em>, when should you update them? When should you check for updates? every day? every week? ‚Ä¶month?</p>\n<p>This is why I made this project, to learn about GitHub Actions and use it to have a <strong>safe way to automatically update the dependencies without making the project fail</strong>.</p>\n<p>The short explanation of this tutorial is about adding the <a href=\"https://github.com/renovatebot/renovate\">Renovate app</a> to check for dependencies updates and then submit Pull Requests to update them, this way we will <em>abstract</em> ourselves on checking for updates, so we can focus on more important things. </p>\n<p>The point of using <a href=\"https://github.com/features/actions\">GitHub Actions</a> is to set up a workflow and trigger it with every Pull Request to check that the build and tests pass with the updated dependencies before adding them to the project.</p>\n<h2 id=\"Table-of-Contents\" style=\"position:relative;\">Table of Contents<a href=\"#Table-of-Contents\" aria-label=\"Table of Contents permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<ul>\n<li><a href=\"#Getting-Started\">Getting Started</a></li>\n<li><a href=\"#Set-up-GitHub-Actions-Workflow\">Set up GitHub Actions Workflow</a></li>\n<li><a href=\"#Add-Renovate\">Add Renovate</a></li>\n<li><a href=\"#Conclusion\">Conclusion</a></li>\n<li><a href=\"#Useful-Resources\">Useful Resources</a></li>\n</ul>\n<h2 id=\"Getting-started\" style=\"position:relative;\">Getting started<a href=\"#Getting-started\" aria-label=\"Getting started permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Although <strong>this approach can be applied to any project</strong> we will use a <a href=\"https://reactjs.org\">React</a> project made with <a href=\"https://github.com/facebook/create-react-app\">Create React App</a> as it will give us a basic project with everything ready to work on. By the way, if you do not have Node.js installed <a href=\"https://nodejs.org/en/download/\">here</a> is the link to do so.</p>\n<p>Also, <a href=\"https://github.com/reymon359/github-actions-and-renovate\">in this repository is the resulting project</a> you will obtain after following all the steps below in case you want to have a look before starting.</p>\n<p>So let‚Äôs begin running</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx create-react-app my-app\n<span class=\"token builtin class-name\">cd</span> my-app\n<span class=\"token function\">npm</span> start</code></pre></div>\n<p>If you use npm 5.1 or earlier, you can‚Äôt use <code class=\"language-text\">npx</code>. Instead, install <code class=\"language-text\">create-react-app</code> globally:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g create-react-app</code></pre></div>\n<p>And then run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">create-react-app my-app</code></pre></div>\n<h2 id=\"Set-up-Github-Actions-Workflow\" style=\"position:relative;\">Set up Github Actions Workflow<a href=\"#Set-up-Github-Actions-Workflow\" aria-label=\"Set up Github Actions Workflow permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Now we will proceed to define a GitHub Actions Workflow in our repository to automate the process.</p>\n<p><em><a href=\"https://github.com/features/actions\">GitHub Actions</a> is a Github Feature that helps your software development workflows automating from simple tasks to custom end-to-end continuous integration (CI) and continuous deployment (CD) capabilities in your repository.</em></p>\n<p>In our root folder, we will create a new folder and name it <code class=\"language-text\">.github</code> and inside of it a <code class=\"language-text\">workflows</code> one. This is how your project should look after these steps:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">üìÅ my-app\n‚îú‚îÄ‚îÄ üìÅ .github\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ workflows\n‚îú‚îÄ‚îÄ ...\n...</code></pre></div>\n<p>Here is where we will create and add our Workflows. Github Actions Workflows are the Continuous Integration automated processes we want to run in our project. </p>\n<p>Workflows are composed of jobs that contain a set of steps and to explain them in a clearer way let‚Äôs create our own workflow explaining it step by step. </p>\n<p>In the <code class=\"language-text\">.github/workflows</code> directory, add a <code class=\"language-text\">.yml</code> or <code class=\"language-text\">.yaml</code> file and name it <code class=\"language-text\">main.yml</code>. I chose that name to keep things simple, but you can give it any other name like <code class=\"language-text\">build-test.yml</code> or <code class=\"language-text\">continuous-integration-workflow.yml</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">üìÅ my-app\n‚îú‚îÄ‚îÄ üìÅ .github\n‚îÇ   ‚îî‚îÄ‚îÄ üìÅ workflows\n‚îÇ       ‚îî‚îÄ‚îÄ üìÑ main.yml\n‚îú‚îÄ‚îÄ ...\n...</code></pre></div>\n<p><a href=\"https://gist.github.com/reymon359/514cf378456457f1798293fe0ed99f3a\">Here</a> is how the workflow will look in the end in case you just want to copy it and add it directly before the explanation.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and Test\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>master<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>master<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build_and_test</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">node</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.node<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.node<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install project\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build the project\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>if<span class=\"token punctuation\">-</span>present\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run tests\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test</code></pre></div>\n<p>The first param of our workflow will be its <strong>name</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and Test</code></pre></div>\n<p>The second param is the <strong>trigger</strong>. </p>\n<p>We can choose if the workflow is <strong>triggered by an event like a push or pull request to a specific branch</strong>, or we can even schedule a <a href=\"https://en.wikipedia.org/wiki/Cron\">cron</a> to <strong>automatically trigger it every defined amount of time!</strong>. </p>\n<p>In our project we will want to trigger it when pushing to the master branch and when the Renovate app submits a Pull Request to update a dependence:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>master<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>master<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Next, we define the <strong>jobs</strong>.</p>\n<p>In this example, there will only be one job which will be the one to <strong>build and test</strong> the project, and chose the virtual machine where the job will be run on.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build_and_test</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</code></pre></div>\n<p>Then it comes to the matrix where we will configure the combination of versions and systems we want to run out Workflow. In our case, we will run it on Node.js 10 and 12.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>Finally, the Workflow‚Äôs steps. The first one is the <a href=\"https://github.com/actions/checkout\">checkout action</a> which is a standard action that you must include in your workflow when you need a copy of your repository to run the workflow.</p>\n<p>Then you can run other actions and processes, in our app, we will use the <strong>setup-node</strong> action with the matrix we defined before. Then we will add steps to install the project, build it, and run the tests.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\">    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Checkout\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Use Node.js $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.node<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v1\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.node<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install project\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build the project\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm run build <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>if<span class=\"token punctuation\">-</span>present\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run tests\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test</code></pre></div>\n<p>Now Create a GitHub Repository for the project, commit the local changes made, and push them to it.</p>\n<p>Quick tip, If you want to create it faster go to <a href=\"https://repo.new\">repo.new</a> or <a href=\"https://github.new\">github.new</a>. You can use <a href=\"https://gist.new\">gist.new</a> for gists too! </p>\n<p>Once you push your changes the Workflow will run, and you will be able to see how it went in the <code class=\"language-text\">Actions</code> <a href=\"https://github.com/reymon359/github-actions-and-renovate/actions\">tab from the GitHub Project</a>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 964px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsby-personal-site/static/3f2edbdeb7e602b0f105a105b3f3c138/72aae/github_actions_workflows.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAAC7klEQVQ4y5WTWU8TURiGBxO9JFApW1u6TPdl2tK9tLSlkEES/4CJgSjoj/LORE288QJoacEL4gLI0kIXFumALEIRgdBIp9I5n2emYqKJRCd55p2cmXnmO+c7QxBE/Y1OI+k3WDQDDpeX9vq6aJ8/QLs9ftpssdEqUkMrlCStVJE4VbRcoaKVpLo2jsfaJTJaKpMPdMgVfoIg6jC3Gl2UseD0OiDSQ0M40gvB7giEwlGw2Z2g0egBvyxAqrWgVutAqVID/ogwZrZYwWSmQKs1bGFZPYZoDvf2M/Sdu9DXP8AFusOIJxLtQ8FwD/IFQjijOLuR1eFG1k4XMlpsSG+mkImyI28gzHWFesHmcG1jVxMhlbaJ3898KGQ3PsFsaq06s7SKZhbzaHoug2YXMyiTy6OVn6SWMyi9kkULqWU0v5S6oprJr8H0m7d8hbcJPakRM/u7TPkS4PjknDsrleHs/AL+4+D4E8tWtgWhQ28RZ3fSTLlSgtJpEd/8Dt/Ov8JEIgmJ5CQkp15DHF+PjsdgLBYXcjw+IYwnJ6cgFp/gRsdi8PTZ85pQ3K4Qv0gUmESqBLGFMy6RZuHJqzSYHR6gnBicaqMFZKQWZLghfMpxoyiHG4w2B+gsNk6pM0KHWlcTtrVJxGPvCszc5iVMZ065+U0WXiaWgXJ5wBsMA2kwC0KNifoNld4k3MNwWrMNtCaqJpRKpeKT4yJTW45LYT2YwoZQnQ9vH4O185f0L2ChFTRGS00okUjEe/sHgvCiXBGE2fy6UKEnGAL+4euEfIUa0x/C/c8HBV5UZitVHCi/uo5MdieyujxIZ7YiPMXrqOJ15IVbV1NuLh592eaFVQ4JE/9YYEChNUC7gsRNqDXib0gxuCEgUap36viN3dra2pTL5XMHh4ewu7tXLhaP2KV0mn0w8pgdfDjCDg2PCHkN5aHhR3Dv/uAqrlDE/3o3RSKRXdTYGMVEGhoaIq0tLRG3yxXxuP8Nr8cd7fL77LzrB9NCJ2aV6w8WAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHub Actions Workflow\"\n        title=\"GitHub Actions Workflow\"\n        src=\"/gatsby-personal-site/static/3f2edbdeb7e602b0f105a105b3f3c138/72aae/github_actions_workflows.png\"\n        srcset=\"/gatsby-personal-site/static/3f2edbdeb7e602b0f105a105b3f3c138/72799/github_actions_workflows.png 320w,\n/gatsby-personal-site/static/3f2edbdeb7e602b0f105a105b3f3c138/6af66/github_actions_workflows.png 640w,\n/gatsby-personal-site/static/3f2edbdeb7e602b0f105a105b3f3c138/72aae/github_actions_workflows.png 964w\"\n        sizes=\"(max-width: 964px) 100vw, 964px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"Add-Renovate\" style=\"position:relative;\">Add Renovate<a href=\"#Add-Renovate\" aria-label=\"Add Renovate permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"https://github.com/marketplace/renovate\">Renovate</a> is a free, open-source, customizable app to automate the update of our dependencies in software projects by receiving pull requests. It is used by software companies like Google, Mozilla, or Uber and you can use it on GitHub, Gitlab, Bitbucket, Azure DevOps, and Gitea.</p>\n<p>Going to the point what we will do is add a bot that will submit pull requests to our repository when there are updates in our project dependencies. </p>\n<p>The cool thing, and the whole point of our project, is that we have previously defined in our workflow to run the tests with the pull requests so when renovate submits one <strong>we will automatically check if the updates proposed will break the project or not before merging them to the master branch</strong>. </p>\n<p><img src=\"/gatsby-personal-site/8067b6f147530261c736bb6e8577d103/thumbs_up_kid.gif\" alt=\"Thumbs Up Kid\"></p>\n<p>To add Renovate to our project we have to install <a href=\"https://github.com/apps/renovate\">its app</a> into the project‚Äôs repository. Be careful when selecting the repository you want to add Renovate to and choose the one created before. If by mistake you want to reconfigure it you can do it in the <a href=\"https://github.com/settings/installations\">Personal Settings‚Äô Applications tab</a> from your account. </p>\n<p>After some minutes we will have to accept and merge the onboarding Pull Request that we will receive.</p>\n<p>Once we have it integrated we will configure it updating the <code class=\"language-text\">renovate.json</code> file on the project root. Remember to pull the changes after merging the Pull Request for it to appear. </p>\n<p>We can use the default configuration where renovate will submit the pull requests whenever it finds out about updates and wait for us to merge them:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"config:base\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Or we can adapt it to the requirements of our project like <a href=\"https://github.com/renovatebot/renovate/blob/master/renovate.json\">the one used by Renovate itself</a>. To avoid falling short and to learn a little more about the tool, we will use a configuration with some of its most useful features. If you want to learn more about its configuration <a href=\"https://docs.renovatebot.com/\">here</a> are the docs for it.</p>\n<p><a href=\"https://gist.github.com/reymon359/4c4417522cd0922cfbc63ad75ca2c945\">This</a> will be our <code class=\"language-text\">renovate.json</code> file. Have a look at it and I will explain it after.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"config:base\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"packageRules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"updateTypes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"minor\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"patch\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"automerge\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"timezone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Madrid\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"schedule\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"after 10pm every weekday\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"before 5am every weekday\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"every weekend\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In the first part, we are telling renovate that our configuration will be an extension from the default one.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"config:base\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Then we have the <code class=\"language-text\">packageRules</code>. After some months using it I realized that going (from time to time) through the pull requests checking and accepting them if the tests passed was a major waste of time. This is why the <code class=\"language-text\">automerge</code> is set to true, so Renovate automatically merges the pull request if the workflow passed successfully. </p>\n<p>To restrict Renovate‚Äôs freedom a bit, we define that he only can perform the <code class=\"language-text\">automerge</code> when it is a <code class=\"language-text\">minor</code> or <code class=\"language-text\">patch</code> update. This way, if it is a <code class=\"language-text\">major</code> or another kind of update, we will be the ones to check whether that update should be added or not. </p>\n<p><a href=\"https://docs.renovatebot.com/configuration-options/#updatetypes\">Here</a> you can find more information about the update types available.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"packageRules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"updateTypes\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"minor\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"patch\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"automerge\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Lastly, we have the time schedule. If you work alone or in a team at certain hours it is nice to have the updates done at times when you are not working to avoid unnecessary distractions.</p>\n<p>We select our timezone and add a custom <a href=\"https://docs.renovatebot.com/presets-schedule/\">schedule</a> for it. You can find the valid timezone names <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\">here</a>. </p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"timezone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Europe/Madrid\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"schedule\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"after 10pm every weekday\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"before 5am every weekday\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"every weekend\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Anyway, if you do not care about the time the pull requests will be submitted, or the people that contribute to the code are in different timezones then you can remove this part.</p>\n<p>Once we have updated the configuration we push the changes to GitHub to have the Renovate app adapted to the new configuration. </p>\n<p>Now you finally have the project dependencies safely up-to-date without you having to check for them. <a href=\"https://github.com/reymon359/github-actions-and-renovate\">Here is the resulting project</a> after following all the steps mentioned above.</p>\n<p>Remember that if you added the time schedule part you will not get the pull request merged automatically until it complies with that configuration.</p>\n<h2 id=\"Conclusion\" style=\"position:relative;\">Conclusion<a href=\"#Conclusion\" aria-label=\"Conclusion permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Although there are other ways to keep the dependencies updated in an automated way if you use GitHub to host your code you should take advantage and make the most of its awesome free features. </p>\n<p>If you are wondering what else you are able to do and automate with the GitHub apps and actions just have a look at its <a href=\"https://github.com/marketplace\">Marketplace</a>.</p>\n<p>In addition, you can have a look at <a href=\"https://github.com/reymon359/up-to-date-react-template\">a project I made</a> where I am working on from time to time and on which I based myself for this tutorial. It is a bit more complex and has more features than the one from this tutorial.</p>\n<p>I hope you enjoyed the tutorial and learned about GitHub Actions and its Apps. If you‚Äôve got any questions, suggestions, or feedback in general, don‚Äôt hesitate to reach out on any of the social networks from <a href=\"https://ramonmorcillo.com\">my site</a> or <a ref=\"mailto:hey@ramonmorcillo.com\">by mail</a>.</p>\n<h2 id=\"Useful-Resources\" style=\"position:relative;\">Useful Resources<a href=\"#Useful-Resources\" aria-label=\"Useful Resources permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill=\"white\" fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>Here is a collection of links and resources which I think can be useful to improve and learn more about GitHub Actions and Apps.</p>\n<ul>\n<li><a href=\"https://github.com/reymon359/github-actions-and-renovate\">Tutorial project</a>. - The resulting project from this tutorial.</li>\n<li><a href=\"https://github.com/marketplace\">GitHub Marketplace</a>. - The place to find all GitHub Actions and Apps.</li>\n<li><a href=\"https://help.github.com/en/actions/configuring-and-managing-workflows/configuring-a-workflow\">GitHub Actions Workflow Configuration</a> - The full documentation on how to set up a workflow on Github Actions.</li>\n<li><a href=\"https://github.com/marketplace/renovate\">Renovate GitHub app</a> - The Renovate App main page on the GitHub Marketplace.</li>\n<li><a href=\"https://gist.github.com/reymon359/514cf378456457f1798293fe0ed99f3a\">GitHub Actions project Workflow</a>. - The Workflow used in this tutorial.</li>\n<li><a href=\"https://gist.github.com/reymon359/4c4417522cd0922cfbc63ad75ca2c945\">Renovate App‚Äôs configuration file</a>. - Renovate App‚Äôs custom configuration file from the tutorial.</li>\n<li><a href=\"https://github.com/reymon359/up-to-date-react-template\">Up to Date React Template</a>. - A Personal project that uses the approach described in this tutorial.</li>\n</ul>","frontmatter":{"title":"Using GitHub Actions and Renovate to safely update dependencies automatically","description":"Keeping your project dependencies updated the right way","date":"July 24, 2020","tags":["Continuous Integration","Tutorial","GitHub","Maintainability"],"featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACaklEQVQozz2TS2sTURiG5z/4A/wP/oMu3bjqQlAQBHUlCApuuhXBbVfiQpG6MJhFCG2ohZD0kqQxncyETO73TCaXuWRymWSStH0931eagcN8czjnOe95v3eker2ORqOBdruNSqWCXq+HwWAA13Uxn88xHo/5PZ1OMZlMYFkWv33fx3q9xnK5xGw24/WLxQJSrVZDtVpFq9VCqVRiYL/f5wW0cTQabWEEdhxHjLGYmzNwtVox9B4uaZoGUkkwqkkdAWkjqTMMg2F0gG3bPL/2ZwBWuLnewPMWrJbAnudBymazKBQKyOVyUBQFnXYLE3csYC6r03Wdr0m1K+ZN00IwUsC33ypsZ47NhhT626tL6XQaBE2lUlDkDLTmCKkO+FkuPJAlpmliOBzCHdvY/x7Di9cf8PjZZ+y+DcOdzBjmCf8YeHl5ycBkMglVkWHPNvij3uBvaYOmcwu900TP6AvoEF3dwJNXv3Cwv4sfX/fwcOcnYskqbq99oX7CdkhnZ2cMvLi4wPn5ORzLhGYCsQbQtpaolosCpAuoAXNk4M3eER48+oKd5wE8fRdCud7HerXcWiRFo1G+bjwex+HhEWT5ihX1jAHHibztdrs8enoX/65UvP8UwcuPIaSVFjbrOxg1jayRIpEITk9PcXJygnA4jEzmSowMFKG6WCxyo8jHu3jVUCxoGPbbmE9thlmWzcooCRQ5iSCxWAwEppqaJMsyZAGkGNF3uVxmtRQtVc0hrxXQbLbgiFhRsyhqlARKhBQIBHB8fIxQKIRgMIhEIgFqFPmpqirX+XxeAJp8APlNoyQOoSaQuvu/i9b8BwOZDI1Dw1KuAAAAAElFTkSuQmCC","aspectRatio":1.7699115044247788,"src":"/gatsby-personal-site/static/0f6e457bf0f28b34c7059720de4dc5c4/0edbf/github_actions_and_renovate_logos.png","srcSet":"/gatsby-personal-site/static/0f6e457bf0f28b34c7059720de4dc5c4/69585/github_actions_and_renovate_logos.png 200w,\n/gatsby-personal-site/static/0f6e457bf0f28b34c7059720de4dc5c4/497c6/github_actions_and_renovate_logos.png 400w,\n/gatsby-personal-site/static/0f6e457bf0f28b34c7059720de4dc5c4/0edbf/github_actions_and_renovate_logos.png 560w","sizes":"(max-width: 560px) 100vw, 560px"}}}}}},"pageContext":{"slug":"/auto-update-dependencies-safely-github-actions/","previous":{"fields":{"slug":"/getting-started-with-graphql-and-nodejs/"},"frontmatter":{"tags":["Tutorial","Node.js","GraphQL","Apollo"],"title":"Getting started with GraphQL and Node.js","type":"post"}},"next":null}},"staticQueryHashes":["1500402284","4120625882"]}