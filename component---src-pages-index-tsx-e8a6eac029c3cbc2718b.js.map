{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.fixed.js","webpack:///./src/components/Head.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.math.hypot.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.math.sign.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es7.object.entries.js","webpack:///./src/components/Intro.tsx","webpack:///./node_modules/react-use-gesture/dist/react-use-gesture.esm.js","webpack:///./src/components/Stars.tsx","webpack:///./src/pages/index.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es7.object.values.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_math-sign.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_object-to-array.js"],"names":["createHTML","this","Head","title","description","image","lang","keywords","query","render","data","metaDescription","site","siteMetadata","metaImage","htmlAttributes","titleTemplate","meta","name","content","property","author","googleSiteVerification","concat","length","join","$export","abs","Math","S","hypot","value1","value2","arg","div","sum","i","aLen","arguments","larg","Infinity","sqrt","sign","$entries","entries","it","TitleWrapper","styled","props","theme","media","md","sm","xs","fixed","css","addRemToProperty","Title","h1","colors","secondary","Intro","addV","v1","v2","map","v","subV","calculateVelocity","delta","delta_t","len","apply","calculateVelocities","Array","fill","calculateDistance","movement","calculateDirection","calculateAllKinematics","velocities","velocity","distance","direction","getIntentionalDisplacement","threshold","rubberband","dimension","constant","pow","rubberband2","rubberbandIfOutOfBounds","position","min","max","value","minMax","_defineProperties","target","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_extends","assign","source","prototype","hasOwnProperty","call","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_arrayLikeToArray","arr","arr2","_createForOfIteratorHelperLoose","o","Symbol","iterator","isArray","minLen","n","toString","slice","from","test","_unsupportedIterableToArray","done","TypeError","next","bind","noop","chainFns","_len","fns","_key","_len2","args","_key2","forEach","fn","def","defaultIfUndefined","matchKeysFromObject","obj","matchingObject","_ref","valueFn","getInitialState","initialCommon","_active","_blocked","_intentional","_movement","_initial","_lastEventType","undefined","event","values","offset","lastOffset","initial","previous","first","last","active","timeStamp","startTime","elapsedTime","cancel","canceled","memo","initialCoordinates","axis","xy","vxvy","initialDistanceAngle","da","vdva","origin","turns","shared","hovering","scrolling","wheeling","dragging","moving","pinching","touches","buttons","down","shiftKey","altKey","metaKey","ctrlKey","drag","_isTap","_delayedEvent","tap","swipe","pinch","wheel","move","scroll","setListeners","add","el","listeners","options","action","eventName","addListeners","removeListeners","getTouchEvents","changedTouches","getGenericEventData","touchEvents","getModifierKeys","getScrollEventValues","_event$currentTarget","currentTarget","scrollX","scrollY","scrollLeft","scrollTop","getWheelEventValues","deltaX","deltaY","getPointerEventValues","_ref2","clientX","clientY","getWebkitGestureEventValues","scale","rotation","getTwoTouchesEventData","dx","dy","atan2","PI","Controller","_this","state","timeouts","domListeners","windowListeners","bindings","clean","resetBindings","clearTimeout","stateKey","removeWindowListeners","domTarget","getDomTarget","config","eventOptions","current","addWindowListeners","window","addDomTargetListeners","push","substr","toLowerCase","addBindings","eventNames","getBindings","captureString","fnsArray","getBind","useRecognizers","handlers","classes","nativeHandlers","controller","useMemo","nativeRefs","_step","_iterator","RecognizerClass","useEffect","Recognizer","debounced","setTimeout","callback","ms","_window","getStartGestureState","vector","bounds","fireGestureHandler","forceFlag","_this$state$_intentio","intentionalX","intentionalY","_this$state","ingKey","mapStateValues","newMemo","handler","Constructor","protoProps","staticProps","_proto","updateSharedState","sharedState","updateGestureState","gestureState","getGenericPayload","isStartEvent","type","_this$state2","checkIntentionality","_state","getMovement","_this$config","t0","t1","_state2","intentional","prevMovement","i0","i1","_this$getInternalMove","getInternalMovement","_m0","_m1","intentionalityCheck","_i0","_i1","_rubberband","get","enabled","CoordinatesRecognizer","_Recognizer","_intentional2","_ix","_iy","intentionalMovement","_movement$map","absX","absY","configAxis","lockDirection","getKinematics","movementDetection","DragRecognizer","_CoordinatesRecognize","wasTouch","isEventTypeTouch","dragShouldStart","pointer","setPointers","pointerId","setPointerCapture","removePointers","releasePointerCapture","isTouch","dragListeners","onDragChange","onDragEnd","onDragStart","delay","persist","startDrag","genericEventData","kinematics","onCancel","_this$state2$velociti","vx","vy","_this$state2$movement","mx","my","_this$state2$_intenti","ix","iy","endState","_this$config$swipeVel","swipeVelocity","svx","svy","_this$config$swipeDis","swipeDistance","sx","sy","filterTaps","self","ReferenceError","_assertThisInitialized","requestAnimationFrame","_this2","startState","defaultWindow","defaultCoordinatesOptions","getInternalGenericOptions","_config","_config$eventOptions","_config$eventOptions$","passive","_config$eventOptions$2","capture","_config$eventOptions$3","_config$window","_config$domTarget","_config$enabled","getInternalGestureOptions","gestureConfig","_gestureConfig$thresh","_gestureConfig$rubber","_gestureConfig$enable","_gestureConfig$initia","getInternalCoordinatesOptions","coordinatesConfig","_coordinatesConfig","_coordinatesConfig$bo","internalOptions","boundsArray","left","right","top","bottom","getInternalDistanceAngleOptions","distanceAngleConfig","_distanceAngleConfig","_distanceAngleConfig$","distanceBounds","_distanceAngleConfig$2","angleBounds","getInternalDragOptions","dragConfig","_dragConfig","dragOptions","_dragOptions$swipeVel","_dragOptions$swipeDis","_dragOptions$delay","_dragOptions$filterTa","internalCoordinatesOptions","PinchRecognizer","_DistanceAngleRecogni","pinchShouldStart","onPinchStart","_getTwoTouchesEventDa","onPinchChange","_getTwoTouchesEventDa2","onPinchEnd","onGestureStart","preventDefault","onGestureChange","onGestureEnd","updateTouchData","wheelShouldRun","getWheelValuesFromEvent","delta_d","_this$state$values","prev_d","prev_a","onWheel","onWheelEnd","onWheelChange","onWheelStart","_this$getWheelValuesF","_this$getWheelValuesF2","GestureEvent","e","supportsGestureEvents","DistanceAngleRecognizer","d","a","delta_a","newTurns","WheelRecognizer","getValuesFromEvent","prevValues","MoveRecognizer","moveShouldRun","onMove","onMoveEnd","onMoveChange","onMoveStart","onPointerEnter","hover","onPointerLeave","ScrollRecognizer","scrollShouldRun","onScroll","onScrollEnd","onScrollChange","onScrollStart","includeStartEndHandlers","handlerKey","_nativeHandlers","startKey","endKey","StarsContainer","black","Stars","actions","useState","Set","k","replace","mergedConfig","internalHandlers","has","onHover","useGesture","onPinch","accelerate","React","useRef","windowWidth","windowHeight","starsNumber","innerWidth","innerHeight","stars","cursorInsideCanvas","x","y","pointerActive","tx","ty","z","movePointer","userPositionX","userPositionY","ox","oy","resizeCanvas","canvas","devicePixelRatio","width","height","star","random","acceleration","canvasRef","context","setContext","handleMouseMove","handleTouchMove","handleMouseLeave","handleTouchLeave","handleResize","handleWheel","renderCtx","getContext","addEventListener","document","update","recycleStar","generateStars","step","clearRect","beginPath","lineCap","lineWidth","strokeStyle","moveTo","tailX","tailY","lineTo","stroke","removeEventListener","id","ref","style","pageQuery","Index","siteTitle","Layout","$values","module","exports","fails","defined","quot","string","tag","attribute","String","p1","NAME","exec","O","P","F","split","DESCRIPTORS","getKeys","toIObject","isEnum","f","isEntries","result"],"mappings":"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","file":"component---src-pages-index-tsx-e8a6eac029c3cbc2718b.js","sourcesContent":["'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n","import React from 'react';\nimport {Helmet} from 'react-helmet';\nimport {StaticQuery, graphql} from 'gatsby';\n\ntype StaticQueryData = {\n  site: {\n    siteMetadata: {\n      title: string;\n      description: string;\n      image: string;\n      googleSiteVerification: string;\n      author: {\n        name: string;\n      };\n    };\n  };\n};\n\ninterface HeadProps {\n  readonly title: string;\n  readonly description?: string;\n  readonly image?: string;\n  readonly lang?: string;\n  readonly keywords?: string[];\n}\n\nconst Head: React.FC<HeadProps> = ({\n  title,\n  description,\n  image,\n  lang,\n  keywords\n}) => (\n  <StaticQuery\n    query={graphql`\n      query {\n        site {\n          siteMetadata {\n            title\n            description\n            image\n            googleSiteVerification\n            author {\n              name\n            }\n          }\n        }\n      }\n    `}\n    render={(data: StaticQueryData): React.ReactElement | null => {\n      const metaDescription = description || data.site.siteMetadata.description;\n      const metaImage = image || data.site.siteMetadata.image;\n      lang = lang || 'en';\n      keywords = keywords || [];\n      return (\n        <Helmet\n          htmlAttributes={{\n            lang\n          }}\n          title={title}\n          titleTemplate={`%s | ${data.site.siteMetadata.title}`}\n          meta={[\n            {\n              name: `description`,\n              content: metaDescription\n            },\n            {\n              property: `og:title`,\n              content: title\n            },\n            {\n              property: `og:description`,\n              content: metaDescription\n            },\n            {\n              property: `og:image`,\n              content: metaImage\n            },\n            {\n              property: `og:type`,\n              content: `website`\n            },\n            {\n              name: `twitter:card`,\n              content: `summary`\n            },\n            {\n              name: `twitter:creator`,\n              content: data.site.siteMetadata.author.name\n            },\n            {\n              name: `twitter:title`,\n              content: title\n            },\n            {\n              name: `twitter:description`,\n              content: metaDescription\n            },\n            {\n              name: `twitter:image`,\n              content: metaImage\n            },\n            {\n              name: `google-site-verification`,\n              content: data.site.siteMetadata.googleSiteVerification\n            }\n          ].concat(\n            keywords.length > 0\n              ? {\n                  name: `keywords`,\n                  content: keywords.join(`, `)\n                }\n              : []\n          )}\n        />\n      );\n    }}\n  />\n);\n\nexport default Head;\n","// 20.2.2.17 Math.hypot([value1[, value2[,  ]]])\nvar $export = require('./_export');\nvar abs = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});\n","// 20.2.2.28 Math.sign(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { sign: require('./_math-sign') });\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","import React from 'react';\nimport styled, {css} from 'styled-components';\nimport {addRemToProperty} from '../styles/shared';\n\ntype TitleWrapperProps = {\n  fixed: boolean;\n};\n\nconst TitleWrapper = styled.div<TitleWrapperProps>`\n  font-size: 1.7rem;\n  max-width: 36rem;\n  line-height: 1.3em;\n  ${props => props.theme.media.md`\n    max-width: 32rem;\n  `}\n  ${props => props.theme.media.sm`\n    max-width: 100%;\n    font-size: 1.5rem;\n  `}\n  ${props => props.theme.media.xs`\n    font-size: 1.35rem;\n  `}\n\n  ${props =>\n  props.fixed\n    ? css`\n          ${addRemToProperty('padding')};\n          position: absolute;\n          top: 0;\n          right: 0;\n          text-align: right;\n          ${props => props.theme.media.md`\n        text-align: left;\n        left: 0;\n        right: auto;\n      `}\n        `\n    : css`\n          text-align: left;\n        `}\n`;\n\nconst Title = styled.h1`\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin: 0px;\n  font-family: inherit;\n  font-size: inherit;\n  span {\n    color: ${props => props.theme.colors.secondary};\n    text-decoration: line-through;\n  }\n`;\n\ntype IntroProps = {\n  fixed: boolean;\n};\n\nconst Intro: React.FC<IntroProps> = props => (\n  <TitleWrapper {...props}>\n    <Title>\n      Hi, I am Ramon Morcillo, a software engineer based in Madrid, Spain\n    </Title>\n  </TitleWrapper>\n);\n\nexport default Intro;\n","import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es7.object.values\";\nimport \"core-js/modules/es7.object.entries\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.function.bind\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.math.sign\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.math.hypot\";\nimport \"core-js/modules/es6.array.map\";\nimport React from 'react'; // vector add\n\nfunction addV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v + v2[i];\n  });\n} // vector substract\n\n\nfunction subV(v1, v2) {\n  return v1.map(function (v, i) {\n    return v - v2[i];\n  });\n}\n/**\r\n * Calculates velocity\r\n * @param delta the difference between current and previous vectors\r\n * @param delta_t the time offset\r\n * @param len the length of the delta vector\r\n * @returns velocity\r\n */\n\n\nfunction calculateVelocity(delta, delta_t, len) {\n  len = len || Math.hypot.apply(Math, delta);\n  return delta_t ? len / delta_t : 0;\n}\n/**\r\n * Calculates velocities vector\r\n * @template T the expected vector type\r\n * @param delta the difference between current and previous vectors\r\n * @param delta_t the time offset\r\n * @returns velocities vector\r\n */\n\n\nfunction calculateVelocities(delta, delta_t) {\n  return delta_t ? delta.map(function (v) {\n    return v / delta_t;\n  }) : Array(delta.length).fill(0);\n}\n/**\r\n * Calculates distance\r\n * @param movement the difference between current and initial vectors\r\n * @returns distance\r\n */\n\n\nfunction calculateDistance(movement) {\n  return Math.hypot.apply(Math, movement);\n}\n/**\r\n * Calculates direction\r\n * @template T the expected vector type\r\n * @param delta\r\n * @param len\r\n * @returns direction\r\n */\n\n\nfunction calculateDirection(delta, len) {\n  len = len || Math.hypot.apply(Math, delta) || 1;\n  return delta.map(function (v) {\n    return v / len;\n  });\n}\n/**\r\n * Calculates all kinematics\r\n * @template T the expected vector type\r\n * @param movement the difference between current and initial vectors\r\n * @param delta the difference between current and previous vectors\r\n * @param delta_t the time difference between current and previous timestamps\r\n * @returns all kinematics\r\n */\n\n\nfunction calculateAllKinematics(movement, delta, delta_t) {\n  var len = Math.hypot.apply(Math, delta);\n  return {\n    velocities: calculateVelocities(delta, delta_t),\n    velocity: calculateVelocity(delta, delta_t, len),\n    distance: calculateDistance(movement),\n    direction: calculateDirection(delta, len)\n  };\n}\n\nfunction getIntentionalDisplacement(movement, threshold) {\n  var abs = Math.abs(movement);\n  return abs >= threshold ? Math.sign(movement) * threshold : false;\n}\n\nfunction minMax(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n} // Based on @aholachek ;)\n// https://twitter.com/chpwn/status/285540192096497664\n// iOS constant = 0.55\n// https://medium.com/@nathangitter/building-fluid-interfaces-ios-swift-9732bb934bf5\n\n\nfunction rubberband2(distance, constant) {\n  // default constant from the article is 0.7\n  return Math.pow(distance, constant * 5);\n}\n\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return rubberband2(distance, constant);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\n\nfunction rubberbandIfOutOfBounds(position, min, max, constant) {\n  if (constant === void 0) {\n    constant = 0.15;\n  }\n\n  if (constant === 0) return minMax(position, min, max);\n\n  if (position < min) {\n    return -rubberband(min - position, max - min, constant) + min;\n  }\n\n  if (position > max) {\n    return rubberband(position - max, max - min, constant) + max;\n  }\n\n  return position;\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o) {\n  var i = 0;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  i = o[Symbol.iterator]();\n  return i.next.bind(i);\n} // blank function\n\n\nfunction noop() {} // returns a function that chains all functions given as parameters\n\n\nvar chainFns = function chainFns() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return fns.forEach(function (fn) {\n      return fn.apply(void 0, args);\n    });\n  };\n};\n\nvar def = {\n  array: function array(value) {\n    return Array.isArray(value) ? value : [value, value];\n  },\n  withDefault: function withDefault(value, defaultIfUndefined) {\n    return value !== void 0 ? value : defaultIfUndefined;\n  }\n};\n\nfunction matchKeysFromObject(obj, matchingObject) {\n  var o = {};\n  Object.entries(obj).forEach(function (_ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    return (value !== void 0 || key in matchingObject) && (o[key] = value);\n  });\n  return o;\n}\n\nfunction valueFn(v) {\n  return typeof v === 'function' ? v() : v;\n}\n\nfunction getInitialState() {\n  // common initial state for all gestures\n  var initialCommon = {\n    _active: false,\n    _blocked: false,\n    _intentional: [false, false],\n    _movement: [0, 0],\n    _initial: [0, 0],\n    _lastEventType: undefined,\n    event: undefined,\n    // currentTarget: undefined,\n    // pointerId: undefined,\n    values: [0, 0],\n    velocities: [0, 0],\n    delta: [0, 0],\n    movement: [0, 0],\n    offset: [0, 0],\n    lastOffset: [0, 0],\n    direction: [0, 0],\n    initial: [0, 0],\n    previous: [0, 0],\n    first: false,\n    last: false,\n    active: false,\n    timeStamp: 0,\n    startTime: 0,\n    elapsedTime: 0,\n    cancel: noop,\n    canceled: false,\n    memo: undefined,\n    args: undefined\n  }; // initial state for coordinates-based gestures\n\n  var initialCoordinates = {\n    axis: undefined,\n    xy: [0, 0],\n    vxvy: [0, 0],\n    velocity: 0,\n    distance: 0\n  }; // initial state for distance and angle-based gestures (pinch)\n\n  var initialDistanceAngle = {\n    da: [0, 0],\n    vdva: [0, 0],\n    origin: undefined,\n    turns: 0\n  }; // initial state object (used by the gesture controller)\n\n  return {\n    shared: {\n      hovering: false,\n      scrolling: false,\n      wheeling: false,\n      dragging: false,\n      moving: false,\n      pinching: false,\n      touches: 0,\n      buttons: 0,\n      down: false,\n      shiftKey: false,\n      altKey: false,\n      metaKey: false,\n      ctrlKey: false\n    },\n    drag: _extends({}, initialCommon, {}, initialCoordinates, {\n      _isTap: true,\n      _delayedEvent: false,\n      tap: false,\n      swipe: [0, 0]\n    }),\n    pinch: _extends({}, initialCommon, {}, initialDistanceAngle),\n    wheel: _extends({}, initialCommon, {}, initialCoordinates),\n    move: _extends({}, initialCommon, {}, initialCoordinates),\n    scroll: _extends({}, initialCommon, {}, initialCoordinates)\n  };\n}\n\nvar setListeners = function setListeners(add) {\n  return function (el, listeners, options) {\n    var action = add ? 'addEventListener' : 'removeEventListener';\n    listeners.forEach(function (_ref) {\n      var eventName = _ref[0],\n          fn = _ref[1];\n      return el[action](eventName, fn, options);\n    });\n  };\n};\n/**\r\n * Whether the browser supports GestureEvent (ie Safari)\r\n * @returns true if the browser supports gesture event\r\n */\n\n\nfunction supportsGestureEvents() {\n  try {\n    // TODO [TS] possibly find GestureEvent definitions?\n    // @ts-ignore: no type definitions for webkit GestureEvents\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar addListeners = /*#__PURE__*/setListeners(true);\nvar removeListeners = /*#__PURE__*/setListeners(false);\n/**\r\n * Gets modifier keys from event\r\n * @param event\r\n * @returns modifier keys\r\n */\n\nfunction getModifierKeys(event) {\n  var shiftKey = event.shiftKey,\n      altKey = event.altKey,\n      metaKey = event.metaKey,\n      ctrlKey = event.ctrlKey;\n  return {\n    shiftKey: shiftKey,\n    altKey: altKey,\n    metaKey: metaKey,\n    ctrlKey: ctrlKey\n  };\n}\n\nfunction getTouchEvents(event) {\n  if ('touches' in event) {\n    var touches = event.touches,\n        changedTouches = event.changedTouches;\n    return touches.length > 0 ? touches : changedTouches;\n  }\n\n  return null;\n}\n\nfunction getGenericEventData(event) {\n  var buttons = 'buttons' in event ? event.buttons : 0;\n  var touchEvents = getTouchEvents(event);\n  var touches = touchEvents && touchEvents.length || 0;\n  var down = touches > 0 || buttons > 0;\n  return _extends({\n    touches: touches,\n    down: down,\n    buttons: buttons\n  }, getModifierKeys(event));\n}\n/**\r\n * Gets scroll event values\r\n * @param event\r\n * @returns scroll event values\r\n */\n\n\nfunction getScrollEventValues(event) {\n  // If the currentTarget is the window then we return the scrollX/Y position.\n  // If not (ie the currentTarget is a DOM element), then we return scrollLeft/Top\n  var _event$currentTarget = event.currentTarget,\n      scrollX = _event$currentTarget.scrollX,\n      scrollY = _event$currentTarget.scrollY,\n      scrollLeft = _event$currentTarget.scrollLeft,\n      scrollTop = _event$currentTarget.scrollTop;\n  return {\n    values: [scrollX || scrollLeft || 0, scrollY || scrollTop || 0]\n  };\n}\n/**\r\n * Gets wheel event values.\r\n * @param event\r\n * @returns wheel event values\r\n */\n\n\nfunction getWheelEventValues(event) {\n  var deltaX = event.deltaX,\n      deltaY = event.deltaY; //TODO implement polyfill ?\n  // https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Polyfill\n\n  return {\n    values: [deltaX, deltaY]\n  };\n}\n/**\r\n * Gets pointer event values.\r\n * @param event\r\n * @returns pointer event values\r\n */\n\n\nfunction getPointerEventValues(event) {\n  var touchEvents = getTouchEvents(event);\n\n  var _ref2 = touchEvents ? touchEvents[0] : event,\n      clientX = _ref2.clientX,\n      clientY = _ref2.clientY;\n\n  return {\n    values: [clientX, clientY]\n  };\n}\n\nvar WEBKIT_DISTANCE_SCALE_FACTOR = 260;\n/**\r\n * Gets webkit gesture event values.\r\n * @param event\r\n * @returns webkit gesture event values\r\n */\n\nfunction getWebkitGestureEventValues(event) {\n  return {\n    values: [event.scale * WEBKIT_DISTANCE_SCALE_FACTOR, event.rotation]\n  };\n}\n/**\r\n * Gets two touches event data\r\n * @param event\r\n * @returns two touches event data\r\n */\n\n\nfunction getTwoTouchesEventData(event) {\n  var touches = event.touches;\n  var dx = touches[1].clientX - touches[0].clientX;\n  var dy = touches[1].clientY - touches[0].clientY;\n  var values = [Math.hypot(dx, dy), -(Math.atan2(dx, dy) * 180) / Math.PI];\n  var origin = [(touches[1].clientX + touches[0].clientX) / 2, (touches[1].clientY + touches[0].clientY) / 2];\n  return {\n    values: values,\n    origin: origin\n  };\n}\n/**\r\n * The controller will keep track of the state for all gestures and also keep\r\n * track of timeouts, and window listeners.\r\n *\r\n * @template BinderType the type the bind function should return\r\n */\n\n\nvar Controller = function Controller() {\n  var _this = this;\n\n  this.state = getInitialState(); // state for all gestures\n\n  this.timeouts = {}; // keeping track of timeouts for debounced gestures (such as move, scroll, wheel)\n\n  this.domListeners = []; // when config.domTarget is set, we attach events directly to the dom\n\n  this.windowListeners = {}; // keeps track of window listeners added by gestures (drag only at the moment)\n\n  this.bindings = {}; // an object holding the handlers associated to the gestures\n\n  /**\r\n   * Function ran on component unmount: cleans timeouts and removes dom listeners set by the bind function.\r\n   */\n\n  this.clean = function () {\n    _this.resetBindings();\n\n    Object.values(_this.timeouts).forEach(clearTimeout);\n    Object.keys(_this.windowListeners).forEach(function (stateKey) {\n      return _this.removeWindowListeners(stateKey);\n    });\n  };\n  /**\r\n   * Function run every time the bind function is run (ie on every render).\r\n   * Resets the binding object and remove dom listeners attached to config.domTarget\r\n   */\n\n\n  this.resetBindings = function () {\n    _this.bindings = {};\n\n    var domTarget = _this.getDomTarget();\n\n    if (domTarget) {\n      removeListeners(domTarget, _this.domListeners, _this.config.eventOptions);\n      _this.domListeners = [];\n    }\n  };\n  /**\r\n   * Returns the domTarget element and parses a ref if needed.\r\n   */\n\n\n  this.getDomTarget = function () {\n    var domTarget = _this.config.domTarget;\n    return domTarget && 'current' in domTarget ? domTarget.current : domTarget;\n  };\n  /**\r\n   * Commodity function to let recognizers simply add listeners to config.window.\r\n   */\n\n\n  this.addWindowListeners = function (stateKey, listeners) {\n    if (!_this.config.window) return; // we use this.windowListeners to keep track of the listeners we add\n\n    _this.windowListeners[stateKey] = listeners;\n    addListeners(_this.config.window, listeners, _this.config.eventOptions);\n  };\n  /**\r\n   * Commodity function to let recognizers simply remove listeners to config.window.\r\n   */\n\n\n  this.removeWindowListeners = function (stateKey) {\n    if (!_this.config.window) return;\n    var listeners = _this.windowListeners[stateKey];\n\n    if (listeners) {\n      removeListeners(_this.config.window, listeners, _this.config.eventOptions);\n      delete _this.windowListeners[stateKey];\n    }\n  };\n  /**\r\n   * When config.domTarget is set, this function will add dom listeners to it\r\n   */\n\n\n  this.addDomTargetListeners = function (target) {\n    /** We iterate on the entries of this.binding for each event, then we chain\r\n     * the array of functions mapped to it and push them to this.domListeners\r\n     */\n    Object.entries(_this.bindings).forEach(function (_ref) {\n      var event = _ref[0],\n          fns = _ref[1];\n\n      _this.domListeners.push([event.substr(2).toLowerCase(), chainFns.apply(void 0, fns)]);\n    });\n    addListeners(target, _this.domListeners, _this.config.eventOptions);\n  };\n  /**\r\n   * this.bindings is an object which keys match ReactEventHandlerKeys.\r\n   * Since a recognizer might want to bind a handler function to an event key already used by a previously\r\n   * added recognizer, we need to make sure that each event key is an array of all the functions mapped for\r\n   * that key.\r\n   */\n\n\n  this.addBindings = function (eventNames, fn) {\n    var eventNamesArray = !Array.isArray(eventNames) ? [eventNames] : eventNames;\n    eventNamesArray.forEach(function (eventName) {\n      if (_this.bindings[eventName]) _this.bindings[eventName].push(fn);else _this.bindings[eventName] = [fn];\n    });\n  };\n  /**\r\n   * getBindings will return an object that will be bound by users\r\n   * to the react component they want to interact with.\r\n   */\n\n\n  this.getBindings = function () {\n    var bindings = {};\n    var captureString = _this.config.captureString;\n    Object.entries(_this.bindings).forEach(function (_ref2) {\n      var event = _ref2[0],\n          fns = _ref2[1];\n      var fnsArray = Array.isArray(fns) ? fns : [fns];\n      var key = event + captureString;\n      bindings[key] = chainFns.apply(void 0, fnsArray);\n    });\n    return bindings;\n  };\n\n  this.getBind = function () {\n    // If config.domTarget is set we add event listeners to it and return the clean function.\n    if (_this.config.domTarget) {\n      var domTarget = _this.getDomTarget();\n\n      domTarget && _this.addDomTargetListeners(domTarget);\n      return _this.clean;\n    } // If not, we return an object that contains gesture handlers mapped to react handler event keys.\n\n\n    return _this.getBindings();\n  };\n};\n/**\r\n * @private\r\n *\r\n * Utility hook called by all gesture hooks and that will be responsible for the internals.\r\n *\r\n * @param {Partial<InternalHandlers>} handlers\r\n * @param {RecognizerClasses} classes\r\n * @param {InternalConfig} config\r\n * @param {NativeHandlersPartial} nativeHandlers - native handlers such as onClick, onMouseDown, etc.\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useRecognizers(handlers, classes, config, nativeHandlers) {\n  // The gesture controller keeping track of all gesture states\n  var controller = React.useMemo(function () {\n    var current = new Controller();\n    /**\r\n     * The bind function will create gesture recognizers and return the right\r\n     * bind object depending on whether `domTarget` was specified in the config object.\r\n     */\n\n    var bind = function bind() {\n      current.resetBindings();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      for (var _iterator = _createForOfIteratorHelperLoose(classes), _step; !(_step = _iterator()).done;) {\n        var RecognizerClass = _step.value;\n        new RecognizerClass(current, args).addBindings();\n      } // we also add event bindings for native handlers\n\n\n      if (controller.nativeRefs) {\n        for (var eventName in controller.nativeRefs) {\n          current.addBindings(eventName, // @ts-ignore we're cheating when it comes to event type :(\n          controller.nativeRefs[eventName]);\n        }\n      }\n\n      return current.getBind();\n    };\n\n    return {\n      nativeRefs: nativeHandlers,\n      current: current,\n      bind: bind\n    };\n  }, []); // We reassign the config and handlers to the controller on every render.\n\n  controller.current.config = config;\n  controller.current.handlers = handlers; // We assign nativeHandlers, otherwise they won't be refreshed on the next render.\n\n  controller.nativeRefs = nativeHandlers; // Run controller clean functions on unmount.\n\n  React.useEffect(function () {\n    return controller.current.clean;\n  }, []);\n  return controller.bind;\n}\n/**\r\n * @private\r\n * Recognizer abstract class.\r\n *\r\n * @protected\r\n * @abstract\r\n * @type {StateKey<T>} whether the Recognizer should deal with coordinates or distance / angle\r\n */\n\n\nvar Recognizer = /*#__PURE__*/function () {\n  /**\r\n   * Creates an instance of a gesture recognizer.\r\n   * @param stateKey drag, move, pinch, etc.\r\n   * @param controller the controller attached to the gesture\r\n   * @param [args] the args that should be passed to the gesture handler\r\n   */\n  function Recognizer(stateKey, controller, args) {\n    var _this = this;\n\n    if (args === void 0) {\n      args = [];\n    }\n\n    this.stateKey = stateKey;\n    this.controller = controller;\n    this.args = args;\n    this.debounced = true; // Convenience method to set a timeout for a given gesture\n\n    this.setTimeout = function (callback, ms) {\n      var _window;\n\n      if (ms === void 0) {\n        ms = 140;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        args[_key - 2] = arguments[_key];\n      }\n\n      _this.controller.timeouts[_this.stateKey] = (_window = window).setTimeout.apply(_window, [callback, ms].concat(args));\n    }; // Convenience method to clear a timeout for a given gesture\n\n\n    this.clearTimeout = function () {\n      clearTimeout(_this.controller.timeouts[_this.stateKey]);\n    }; // Convenience method to add window listeners for a given gesture\n\n\n    this.addWindowListeners = function (listeners) {\n      _this.controller.addWindowListeners(_this.stateKey, listeners);\n    }; // Convenience method to remove window listeners for a given gesture\n\n\n    this.removeWindowListeners = function () {\n      _this.controller.removeWindowListeners(_this.stateKey);\n    };\n    /**\r\n     * Returns the reinitialized start state for the gesture.\r\n     * Should be common to all gestures.\r\n     *\r\n     * @param {Vector2} values\r\n     * @param {UseGestureEvent} event\r\n     * @returns - the start state for the gesture\r\n     */\n\n\n    this.getStartGestureState = function (values, event) {\n      return _extends({}, getInitialState()[_this.stateKey], {\n        _active: true,\n        values: values,\n        initial: values,\n        offset: _this.state.offset,\n        lastOffset: _this.state.offset,\n        startTime: event.timeStamp\n      });\n    }; // Runs rubberband on a vector\n\n\n    this.rubberband = function (vector, rubberband) {\n      var bounds = _this.config.bounds;\n      /**\r\n       * [x, y]: [rubberband(x, min, max), rubberband(y, min, max)]\r\n       */\n\n      return vector.map(function (v, i) {\n        return rubberbandIfOutOfBounds(v, bounds[i][0], bounds[i][1], rubberband[i]);\n      });\n    };\n    /**\r\n     * Fires the gesture handler\r\n     *\r\n     * @param {boolean} [forceFlag] - if true, then the handler will fire even if the gesture is not intentional\r\n     */\n\n\n    this.fireGestureHandler = function (forceFlag) {\n      /**\r\n       * If the gesture has been blocked (this can happen when the gesture has started in an unwanted direction),\r\n       * clean everything and don't do anything.\r\n       */\n      if (_this.state._blocked) {\n        // we need debounced gestures to end by themselves\n        if (!_this.debounced) {\n          _this.state._active = false;\n\n          _this.clean();\n        }\n\n        return null;\n      } // If the gesture has no intentional dimension, don't do fire the handler.\n\n\n      var _this$state$_intentio = _this.state._intentional,\n          intentionalX = _this$state$_intentio[0],\n          intentionalY = _this$state$_intentio[1];\n      if (!forceFlag && intentionalX === false && intentionalY === false) return null;\n      var _this$state = _this.state,\n          _active = _this$state._active,\n          active = _this$state.active;\n      _this.state.active = _active;\n      _this.state.first = _active && !active; // `first` is true when the gesture becomes active\n\n      _this.state.last = active && !_active; // `last` is true when the gesture becomes inactive\n\n      _this.controller.state.shared[_this.ingKey] = _active; // Sets dragging, pinching, etc. to the gesture active state\n\n      var state = _extends({}, _this.controller.state.shared, {}, _this.state, {}, _this.mapStateValues(_this.state)); // @ts-ignore\n\n\n      var newMemo = _this.handler(state); // Sets memo to the returned value of the handler (unless it's not undefined)\n\n\n      _this.state.memo = newMemo !== void 0 ? newMemo : _this.state.memo; // Cleans the gesture when the gesture is no longer active.\n\n      if (!_active) _this.clean();\n      return state;\n    };\n  } // Returns the gesture config\n\n\n  var _proto = Recognizer.prototype; // Conveninence method to update the shared state\n\n  _proto.updateSharedState = function updateSharedState(sharedState) {\n    Object.assign(this.controller.state.shared, sharedState);\n  } // Conveninence method to update the gesture state\n  ;\n\n  _proto.updateGestureState = function updateGestureState(gestureState) {\n    Object.assign(this.state, gestureState);\n  }\n  /**\r\n   * Returns a generic, common payload for all gestures from an event.\r\n   *\r\n   * @param {UseGestureEvent} event\r\n   * @param {boolean} [isStartEvent]\r\n   * @returns - the generic gesture payload\r\n   */\n  ;\n\n  _proto.getGenericPayload = function getGenericPayload(event, isStartEvent) {\n    var timeStamp = event.timeStamp,\n        type = event.type;\n    var _this$state2 = this.state,\n        values = _this$state2.values,\n        startTime = _this$state2.startTime;\n    return {\n      _lastEventType: type,\n      event: event,\n      timeStamp: timeStamp,\n      elapsedTime: isStartEvent ? 0 : timeStamp - startTime,\n      args: this.args,\n      previous: values\n    };\n  }\n  /**\r\n   * Returns state properties depending on the movement and state.\r\n   *\r\n   * Should be overriden for custom behavior, doesn't do anything in the implementation\r\n   * below.\r\n   */\n  ;\n\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement, _state) {\n    return {\n      _intentional: _intentional,\n      _blocked: false\n    };\n  }\n  /**\r\n   * Returns basic movement properties for the gesture based on the next values and current state.\r\n   */\n  ;\n\n  _proto.getMovement = function getMovement(values, state) {\n    if (state === void 0) {\n      state = this.state;\n    }\n\n    var _this$config = this.config,\n        initial = _this$config.initial,\n        threshold = _this$config.threshold,\n        rubberband = _this$config.rubberband;\n    var t0 = threshold[0],\n        t1 = threshold[1];\n    var _state2 = state,\n        _initial = _state2._initial,\n        _active = _state2._active,\n        intentional = _state2._intentional,\n        lastOffset = _state2.lastOffset,\n        prevMovement = _state2.movement;\n    var i0 = intentional[0],\n        i1 = intentional[1];\n\n    var _this$getInternalMove = this.getInternalMovement(values, state),\n        _m0 = _this$getInternalMove[0],\n        _m1 = _this$getInternalMove[1];\n    /**\r\n     * For both dimensions of the gesture, check its intentionality on each frame.\r\n     */\n\n\n    if (i0 === false) {\n      i0 = getIntentionalDisplacement(_m0, t0);\n    }\n\n    if (i1 === false) {\n      i1 = getIntentionalDisplacement(_m1, t1);\n    } // Get gesture specific state properties based on intentionality and movement.\n\n\n    var intentionalityCheck = this.checkIntentionality([i0, i1], [_m0, _m1], state);\n    var _intentional = intentionalityCheck._intentional,\n        _blocked = intentionalityCheck._blocked;\n    var _i0 = _intentional[0],\n        _i1 = _intentional[1];\n    var _movement = [_m0, _m1];\n    if (_i0 !== false && intentional[0] === false) _initial[0] = valueFn(initial)[0];\n    if (_i1 !== false && intentional[1] === false) _initial[1] = valueFn(initial)[1];\n    /**\r\n     * If the gesture has been blocked (from gesture specific checkIntentionality),\r\n     * stop right there.\r\n     */\n\n    if (_blocked) return _extends({}, intentionalityCheck, {\n      _movement: _movement,\n      delta: [0, 0]\n    });\n    /**\r\n     * The movement sent to the handler has 0 in its dimensions when intentionality is false.\r\n     * It is calculated from the actual movement minus the threshold.\r\n     */\n\n    var movement = [_i0 !== false ? _m0 - _i0 : valueFn(initial)[0], _i1 !== false ? _m1 - _i1 : valueFn(initial)[1]];\n    var offset = addV(movement, lastOffset);\n    /**\r\n     * Rubberband should be 0 when the gesture is no longer active, so that movement\r\n     * and offset can return within their bounds.\r\n     */\n\n    var _rubberband = _active ? rubberband : [0, 0];\n\n    movement = this.rubberband(addV(movement, _initial), _rubberband); // rubberbanded movement\n\n    return _extends({}, intentionalityCheck, {\n      _initial: _initial,\n      _movement: _movement,\n      movement: movement,\n      offset: this.rubberband(offset, _rubberband),\n      delta: subV(movement, prevMovement)\n    });\n  } // Cleans the gesture. Can be overriden by gestures.\n  ;\n\n  _proto.clean = function clean() {\n    this.clearTimeout();\n    this.removeWindowListeners();\n  };\n\n  _createClass(Recognizer, [{\n    key: \"config\",\n    get: function get() {\n      return this.controller.config[this.stateKey];\n    } // Is the gesture enabled\n\n  }, {\n    key: \"enabled\",\n    get: function get() {\n      return this.controller.config.enabled && this.config.enabled;\n    } // Returns the controller state for a given gesture\n\n  }, {\n    key: \"state\",\n    get: function get() {\n      return this.controller.state[this.stateKey];\n    } // Returns the gesture handler\n\n  }, {\n    key: \"handler\",\n    get: function get() {\n      return this.controller.handlers[this.stateKey];\n    }\n  }]);\n\n  return Recognizer;\n}();\n/**\r\n * @private\r\n * Abstract class for coordinates-based gesture recongizers\r\n * @abstract\r\n * @class CoordinatesRecognizer\r\n * @extends {Recognizer<T>}\r\n * @template T\r\n */\n\n\nvar CoordinatesRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(CoordinatesRecognizer, _Recognizer);\n\n  function CoordinatesRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n\n  var _proto = CoordinatesRecognizer.prototype;\n  /**\r\n   * Returns the real movement (without taking intentionality into acount)\r\n   */\n\n  _proto.getInternalMovement = function getInternalMovement(values, state) {\n    return subV(values, state.initial);\n  }\n  /**\r\n   * In coordinates-based gesture, this function will detect the first intentional axis,\r\n   * lock the gesture axis if lockDirection is specified in the config, block the gesture\r\n   * if the first intentional axis doesn't match the specified axis in config.\r\n   *\r\n   * @param {[FalseOrNumber, FalseOrNumber]} _intentional\r\n   * @param {Vector2} _movement\r\n   * @param {PartialGestureState<T>} state\r\n   */\n  ;\n\n  _proto.checkIntentionality = function checkIntentionality(_intentional, _movement, state) {\n    var _intentional2 = _intentional,\n        _ix = _intentional2[0],\n        _iy = _intentional2[1];\n    var intentionalMovement = _ix !== false || _iy !== false;\n    var axis = state.axis;\n    var _blocked = false; // If the movement is intentional, we can compute axis.\n\n    if (intentionalMovement) {\n      var _movement$map = _movement.map(Math.abs),\n          absX = _movement$map[0],\n          absY = _movement$map[1];\n\n      var _this$config = this.config,\n          configAxis = _this$config.axis,\n          lockDirection = _this$config.lockDirection; // We make sure we only set axis value if it hadn't been detected before.\n\n      axis = axis || (absX > absY ? 'x' : absX < absY ? 'y' : undefined);\n\n      if (!!configAxis || lockDirection) {\n        if (!!axis) {\n          // If the detected axis doesn't match the config axis we block the gesture\n          if (!!configAxis && axis !== configAxis) _blocked = true;else {\n            // Otherwise we prevent the gesture from updating the unwanted axis.\n            var lockedIndex = axis === 'x' ? 1 : 0;\n            _intentional[lockedIndex] = false;\n          }\n        } else {\n          // Until we've detected the axis, we prevent the hnadler from updating.\n          _intentional = [false, false];\n        }\n      }\n    }\n\n    return {\n      _intentional: _intentional,\n      _blocked: _blocked,\n      axis: axis\n    };\n  };\n\n  _proto.getKinematics = function getKinematics(values, event) {\n    var timeStamp = this.state.timeStamp;\n    var movementDetection = this.getMovement(values, this.state);\n    var _blocked = movementDetection._blocked,\n        delta = movementDetection.delta,\n        movement = movementDetection.movement;\n    if (_blocked) return movementDetection;\n    var delta_t = event.timeStamp - timeStamp;\n    var kinematics = calculateAllKinematics(movement, delta, delta_t);\n    return _extends({\n      values: values,\n      delta: delta\n    }, movementDetection, {}, kinematics);\n  };\n\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      xy: state.values,\n      vxvy: state.velocities\n    };\n  };\n\n  return CoordinatesRecognizer;\n}(Recognizer);\n\nvar TAP_DISTANCE_THRESHOLD = 3;\nvar SWIPE_MAX_ELAPSED_TIME = 220;\nvar FILTER_REPEATED_EVENTS_DELAY = 200;\n\nvar DragRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(DragRecognizer, _CoordinatesRecognize);\n\n  function DragRecognizer(controller, args) {\n    var _this;\n\n    _this = _CoordinatesRecognize.call(this, 'drag', controller, args) || this;\n    _this.ingKey = 'dragging';\n    _this.wasTouch = false;\n\n    _this.isEventTypeTouch = function (type) {\n      return !!type && type.indexOf('touch') === 0;\n    };\n\n    _this.dragShouldStart = function (event) {\n      var _getGenericEventData = getGenericEventData(event),\n          touches = _getGenericEventData.touches;\n\n      var _lastEventType = _this.state._lastEventType;\n      /**\r\n       * This tries to filter out mouse events triggered by touch screens\r\n       * */\n      // If the previous gesture was touch-based, and the current one is mouse based,\n      // this means that we might be dealing with mouse simulated events if they're close to\n      // each other. We're only doing this check when we're not using pointer events.\n\n      if (!_this.controller.config.pointer && _this.isEventTypeTouch(_lastEventType) && !_this.isEventTypeTouch(event.type)) {\n        var delay = Math.abs(event.timeStamp - _this.state.startTime);\n        if (delay < FILTER_REPEATED_EVENTS_DELAY) return false;\n      }\n\n      return _this.enabled && touches < 2;\n    };\n\n    _this.setPointers = function (event) {\n      var currentTarget = event.currentTarget,\n          pointerId = event.pointerId;\n      if (currentTarget) currentTarget.setPointerCapture(pointerId);\n\n      _this.updateGestureState({\n        currentTarget: currentTarget,\n        pointerId: pointerId\n      });\n    };\n\n    _this.removePointers = function () {\n      var _this$state = _this.state,\n          currentTarget = _this$state.currentTarget,\n          pointerId = _this$state.pointerId;\n      if (currentTarget && pointerId) currentTarget.releasePointerCapture(pointerId);\n    };\n\n    _this.setListeners = function (isTouch) {\n      _this.removeWindowListeners();\n\n      var dragListeners = isTouch ? [['touchmove', _this.onDragChange], ['touchend', _this.onDragEnd], ['touchcancel', _this.onDragEnd]] : [['mousemove', _this.onDragChange], ['mouseup', _this.onDragEnd]];\n\n      _this.addWindowListeners(dragListeners);\n    };\n\n    _this.onDragStart = function (event) {\n      if (!_this.dragShouldStart(event)) return; // if pointers events\n\n      if (_this.controller.config.pointer) _this.setPointers(event);else _this.setListeners(_this.isEventTypeTouch(event.type));\n\n      if (_this.config.delay > 0) {\n        _this.state._delayedEvent = true;\n        if (typeof event.persist === 'function') event.persist();\n\n        _this.setTimeout(function () {\n          return _this.startDrag(event);\n        }, _this.config.delay);\n      } else {\n        _this.startDrag(event);\n      }\n    };\n\n    _this.onDragChange = function (event) {\n      var canceled = _this.state.canceled;\n      if (canceled) return;\n\n      if (!_this.state._active) {\n        if (_this.state._delayedEvent) {\n          _this.clearTimeout();\n\n          _this.startDrag(event);\n        }\n\n        return;\n      }\n\n      var genericEventData = getGenericEventData(event);\n\n      if (!genericEventData.down) {\n        _this.onDragEnd(event);\n\n        return;\n      }\n\n      _this.updateSharedState(genericEventData);\n\n      var _getPointerEventValue = getPointerEventValues(event),\n          values = _getPointerEventValue.values;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      var _isTap = _this.state._isTap;\n      if (_isTap && calculateDistance(kinematics._movement) >= TAP_DISTANCE_THRESHOLD) _isTap = false;\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics, {\n        _isTap: _isTap,\n        cancel: function cancel() {\n          return _this.onCancel();\n        }\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onDragEnd = function (event) {\n      _this.state._active = false;\n\n      _this.updateSharedState({\n        down: false,\n        buttons: 0,\n        touches: 0\n      });\n\n      var _this$state2 = _this.state,\n          _isTap = _this$state2._isTap,\n          values = _this$state2.values,\n          _this$state2$velociti = _this$state2.velocities,\n          vx = _this$state2$velociti[0],\n          vy = _this$state2$velociti[1],\n          _this$state2$movement = _this$state2.movement,\n          mx = _this$state2$movement[0],\n          my = _this$state2$movement[1],\n          _this$state2$_intenti = _this$state2._intentional,\n          ix = _this$state2$_intenti[0],\n          iy = _this$state2$_intenti[1];\n\n      var endState = _extends({}, _this.getGenericPayload(event), {}, _this.getMovement(values));\n\n      var elapsedTime = endState.elapsedTime;\n      var _this$config = _this.config,\n          _this$config$swipeVel = _this$config.swipeVelocity,\n          svx = _this$config$swipeVel[0],\n          svy = _this$config$swipeVel[1],\n          _this$config$swipeDis = _this$config.swipeDistance,\n          sx = _this$config$swipeDis[0],\n          sy = _this$config$swipeDis[1];\n      var swipe = [0, 0];\n\n      if (elapsedTime < SWIPE_MAX_ELAPSED_TIME) {\n        if (ix !== false && Math.abs(vx) > svx && Math.abs(mx) > sx) swipe[0] = Math.sign(vx);\n        if (iy !== false && Math.abs(vy) > svy && Math.abs(my) > sy) swipe[1] = Math.sign(vy);\n      }\n\n      _this.updateGestureState(_extends({\n        event: event\n      }, endState, {\n        tap: _isTap,\n        swipe: swipe\n      }));\n\n      _this.fireGestureHandler(_this.config.filterTaps && _this.state._isTap);\n    };\n\n    _this.clean = function () {\n      _CoordinatesRecognize.prototype.clean.call(_assertThisInitialized(_this));\n\n      _this.state._delayedEvent = false;\n      if (_this.controller.config.pointer) _this.removePointers();\n    };\n\n    _this.onCancel = function () {\n      _this.updateGestureState({\n        canceled: true,\n        cancel: noop\n      });\n\n      _this.state._active = false;\n\n      _this.updateSharedState({\n        down: false,\n        buttons: 0,\n        touches: 0\n      });\n\n      requestAnimationFrame(function () {\n        return _this.fireGestureHandler();\n      });\n    };\n\n    return _this;\n  }\n\n  var _proto = DragRecognizer.prototype;\n\n  _proto.startDrag = function startDrag(event) {\n    var _this2 = this;\n\n    var _getPointerEventValue2 = getPointerEventValues(event),\n        values = _getPointerEventValue2.values;\n\n    this.updateSharedState(getGenericEventData(event));\n\n    var startState = _extends({}, this.getStartGestureState(values, event), {}, this.getGenericPayload(event, true));\n\n    this.updateGestureState(_extends({}, startState, {}, this.getMovement(values, startState), {\n      cancel: function cancel() {\n        return _this2.onCancel();\n      }\n    }));\n    this.fireGestureHandler();\n  };\n\n  _proto.addBindings = function addBindings() {\n    if (this.controller.config.pointer) {\n      this.controller.addBindings('onPointerDown', this.onDragStart);\n      this.controller.addBindings('onPointerMove', this.onDragChange);\n      this.controller.addBindings(['onPointerUp', 'onPointerCancel'], this.onDragEnd);\n    } else {\n      this.controller.addBindings(['onTouchStart', 'onMouseDown'], this.onDragStart);\n    }\n  };\n\n  return DragRecognizer;\n}(CoordinatesRecognizer);\n\nvar DEFAULT_DRAG_DELAY = 180;\nvar DEFAULT_RUBBERBAND = 0.15;\nvar DEFAULT_SWIPE_VELOCITY = 0.5;\nvar DEFAULT_SWIPE_DISTANCE = 60;\nvar defaultWindow = typeof window !== 'undefined' ? window : undefined;\nvar defaultCoordinatesOptions = {\n  lockDirection: false,\n  axis: undefined,\n  bounds: undefined\n};\n/**\r\n * @private\r\n *\r\n * Returns the internal generic option object.\r\n *\r\n * @param {Partial<GenericOptions>} [config={}]\r\n * @returns {InternalGenericOptions}\r\n */\n\nfunction getInternalGenericOptions(config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      _config$eventOptions = _config.eventOptions;\n  _config$eventOptions = _config$eventOptions === void 0 ? {} : _config$eventOptions;\n\n  var _config$eventOptions$ = _config$eventOptions.passive,\n      passive = _config$eventOptions$ === void 0 ? true : _config$eventOptions$,\n      _config$eventOptions$2 = _config$eventOptions.capture,\n      capture = _config$eventOptions$2 === void 0 ? false : _config$eventOptions$2,\n      _config$eventOptions$3 = _config$eventOptions.pointer,\n      pointer = _config$eventOptions$3 === void 0 ? false : _config$eventOptions$3,\n      _config$window = _config.window,\n      window = _config$window === void 0 ? defaultWindow : _config$window,\n      _config$domTarget = _config.domTarget,\n      domTarget = _config$domTarget === void 0 ? undefined : _config$domTarget,\n      _config$enabled = _config.enabled,\n      enabled = _config$enabled === void 0 ? true : _config$enabled,\n      restConfig = _objectWithoutPropertiesLoose(_config, [\"eventOptions\", \"window\", \"domTarget\", \"enabled\"]);\n\n  return _extends({}, restConfig, {\n    enabled: enabled,\n    domTarget: domTarget,\n    window: window,\n    // passive is always true if there's no domTarget\n    eventOptions: {\n      passive: !domTarget || !!passive,\n      capture: !!capture\n    },\n    captureString: capture ? 'Capture' : '',\n    pointer: !!pointer\n  });\n}\n\nfunction getInternalGestureOptions(gestureConfig) {\n  var _gestureConfig$thresh = gestureConfig.threshold,\n      threshold = _gestureConfig$thresh === void 0 ? undefined : _gestureConfig$thresh,\n      _gestureConfig$rubber = gestureConfig.rubberband,\n      rubberband = _gestureConfig$rubber === void 0 ? 0 : _gestureConfig$rubber,\n      _gestureConfig$enable = gestureConfig.enabled,\n      enabled = _gestureConfig$enable === void 0 ? true : _gestureConfig$enable,\n      _gestureConfig$initia = gestureConfig.initial,\n      initial = _gestureConfig$initia === void 0 ? [0, 0] : _gestureConfig$initia;\n  if (typeof rubberband === 'boolean') rubberband = rubberband ? DEFAULT_RUBBERBAND : 0;\n  if (threshold === void 0) threshold = 0;\n  return {\n    enabled: enabled,\n    initial: initial,\n    threshold: def.array(threshold),\n    rubberband: def.array(rubberband)\n  };\n}\n\nfunction getInternalCoordinatesOptions(coordinatesConfig) {\n  if (coordinatesConfig === void 0) {\n    coordinatesConfig = {};\n  }\n\n  var _coordinatesConfig = coordinatesConfig,\n      axis = _coordinatesConfig.axis,\n      lockDirection = _coordinatesConfig.lockDirection,\n      _coordinatesConfig$bo = _coordinatesConfig.bounds,\n      bounds = _coordinatesConfig$bo === void 0 ? {} : _coordinatesConfig$bo,\n      internalOptions = _objectWithoutPropertiesLoose(_coordinatesConfig, [\"axis\", \"lockDirection\", \"bounds\"]);\n\n  var boundsArray = [[def.withDefault(bounds.left, -Infinity), def.withDefault(bounds.right, Infinity)], [def.withDefault(bounds.top, -Infinity), def.withDefault(bounds.bottom, Infinity)]];\n  return _extends({}, getInternalGestureOptions(internalOptions), {}, defaultCoordinatesOptions, {}, matchKeysFromObject({\n    axis: axis,\n    lockDirection: lockDirection\n  }, coordinatesConfig), {\n    bounds: boundsArray\n  });\n}\n\nfunction getInternalDistanceAngleOptions(distanceAngleConfig) {\n  if (distanceAngleConfig === void 0) {\n    distanceAngleConfig = {};\n  }\n\n  var _distanceAngleConfig = distanceAngleConfig,\n      _distanceAngleConfig$ = _distanceAngleConfig.distanceBounds,\n      distanceBounds = _distanceAngleConfig$ === void 0 ? {} : _distanceAngleConfig$,\n      _distanceAngleConfig$2 = _distanceAngleConfig.angleBounds,\n      angleBounds = _distanceAngleConfig$2 === void 0 ? {} : _distanceAngleConfig$2,\n      internalOptions = _objectWithoutPropertiesLoose(_distanceAngleConfig, [\"distanceBounds\", \"angleBounds\"]);\n\n  var boundsArray = [[def.withDefault(distanceBounds.min, -Infinity), def.withDefault(distanceBounds.max, Infinity)], [def.withDefault(angleBounds.min, -Infinity), def.withDefault(angleBounds.max, Infinity)]];\n  return _extends({}, getInternalGestureOptions(internalOptions), {\n    bounds: boundsArray\n  });\n}\n\nfunction getInternalDragOptions(dragConfig) {\n  if (dragConfig === void 0) {\n    dragConfig = {};\n  }\n\n  var _dragConfig = dragConfig,\n      enabled = _dragConfig.enabled,\n      threshold = _dragConfig.threshold,\n      bounds = _dragConfig.bounds,\n      rubberband = _dragConfig.rubberband,\n      initial = _dragConfig.initial,\n      dragOptions = _objectWithoutPropertiesLoose(_dragConfig, [\"enabled\", \"threshold\", \"bounds\", \"rubberband\", \"initial\"]);\n\n  var _dragOptions$swipeVel = dragOptions.swipeVelocity,\n      swipeVelocity = _dragOptions$swipeVel === void 0 ? DEFAULT_SWIPE_VELOCITY : _dragOptions$swipeVel,\n      _dragOptions$swipeDis = dragOptions.swipeDistance,\n      swipeDistance = _dragOptions$swipeDis === void 0 ? DEFAULT_SWIPE_DISTANCE : _dragOptions$swipeDis,\n      _dragOptions$delay = dragOptions.delay,\n      delay = _dragOptions$delay === void 0 ? false : _dragOptions$delay,\n      _dragOptions$filterTa = dragOptions.filterTaps,\n      filterTaps = _dragOptions$filterTa === void 0 ? false : _dragOptions$filterTa,\n      axis = dragOptions.axis,\n      lockDirection = dragOptions.lockDirection;\n\n  if (threshold === void 0) {\n    threshold = Math.max(0, filterTaps ? 3 : 0, lockDirection || axis ? 1 : 0);\n  } else {\n    filterTaps = true;\n  }\n\n  var internalCoordinatesOptions = getInternalCoordinatesOptions(matchKeysFromObject({\n    enabled: enabled,\n    threshold: threshold,\n    bounds: bounds,\n    rubberband: rubberband,\n    axis: axis,\n    lockDirection: lockDirection,\n    initial: initial\n  }, dragConfig));\n  return _extends({}, internalCoordinatesOptions, {\n    filterTaps: filterTaps || internalCoordinatesOptions.threshold[0] + internalCoordinatesOptions.threshold[1] > 0,\n    swipeVelocity: def.array(swipeVelocity),\n    swipeDistance: def.array(swipeDistance),\n    delay: typeof delay === 'number' ? delay : delay ? DEFAULT_DRAG_DELAY : 0\n  });\n}\n/**\r\n * @public\r\n *\r\n * Drag hook.\r\n *\r\n * @param {Handler<'drag'>} handler - the function fired every time the drag gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and drag options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useDrag(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      drag = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    drag: getInternalDragOptions(drag)\n  });\n\n  return useRecognizers({\n    drag: handler\n  }, [DragRecognizer], mergedConfig);\n}\n/**\r\n * @private\r\n * Abstract class for distance/angle-based gesture recongizers\r\n * @abstract\r\n * @class DistanceAngleRecognizer\r\n * @extends {Recognizer<T>}\r\n * @template T\r\n */\n\n\nvar DistanceAngleRecognizer = /*#__PURE__*/function (_Recognizer) {\n  _inheritsLoose(DistanceAngleRecognizer, _Recognizer);\n\n  function DistanceAngleRecognizer() {\n    return _Recognizer.apply(this, arguments) || this;\n  }\n\n  var _proto = DistanceAngleRecognizer.prototype;\n  /**\r\n   * Returns the real movement (without taking intentionality into acount)\r\n   */\n\n  _proto.getInternalMovement = function getInternalMovement(_ref, state) {\n    var d = _ref[0],\n        a = _ref[1];\n    var da = state.values,\n        turns = state.turns,\n        initial = state.initial; // angle might not be defined when ctrl wheel is used for zoom only\n    // in that case we set it to the previous angle value\n\n    a = a !== void 0 ? a : da[1];\n    var delta_a = a - da[1];\n    /**\r\n     * The angle value might jump from 179deg to -179deg when we actually want to\r\n     * read 181deg to ensure continuity. To make that happen, we detect when the jump\r\n     * is supsiciously high (ie > 270deg) and increase the `turns` value\r\n     */\n\n    var newTurns = Math.abs(delta_a) > 270 ? turns + Math.sign(delta_a) : turns; // we update the angle difference to its corrected value\n\n    var movement_d = d - initial[0];\n    var movement_a = a - 360 * newTurns - initial[1];\n    return [movement_d, movement_a];\n  };\n\n  _proto.getKinematics = function getKinematics(values, event) {\n    var _this$state = this.state,\n        timeStamp = _this$state.timeStamp,\n        initial = _this$state.initial;\n    var movementDetection = this.getMovement(values, this.state);\n    var delta = movementDetection.delta,\n        movement = movementDetection.movement;\n    var turns = (values[1] - movement[1] - initial[1]) / 360;\n    var delta_t = event.timeStamp - timeStamp;\n    var kinematics = calculateAllKinematics(movement, delta, delta_t);\n    return _extends({\n      values: values,\n      delta: delta,\n      turns: turns\n    }, movementDetection, {}, kinematics);\n  };\n\n  _proto.mapStateValues = function mapStateValues(state) {\n    return {\n      da: state.values,\n      vdva: state.velocities\n    };\n  };\n\n  return DistanceAngleRecognizer;\n}(Recognizer);\n\nvar PinchRecognizer = /*#__PURE__*/function (_DistanceAngleRecogni) {\n  _inheritsLoose(PinchRecognizer, _DistanceAngleRecogni);\n\n  function PinchRecognizer(controller, args) {\n    var _this;\n\n    _this = _DistanceAngleRecogni.call(this, 'pinch', controller, args) || this;\n    _this.ingKey = 'pinching';\n\n    _this.pinchShouldStart = function (event) {\n      var _getGenericEventData = getGenericEventData(event),\n          touches = _getGenericEventData.touches;\n\n      return _this.enabled && touches === 2;\n    };\n\n    _this.onPinchStart = function (event) {\n      if (!_this.pinchShouldStart(event)) return;\n\n      var _getTwoTouchesEventDa = getTwoTouchesEventData(event),\n          values = _getTwoTouchesEventDa.values,\n          origin = _getTwoTouchesEventDa.origin;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true));\n\n      _this.updateGestureState(_extends({}, startState, {}, _this.getMovement(values, startState), {\n        origin: origin,\n        cancel: function cancel() {\n          return _this.onCancel();\n        }\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onPinchChange = function (event) {\n      var _this$state = _this.state,\n          canceled = _this$state.canceled,\n          timeStamp = _this$state.timeStamp,\n          _active = _this$state._active;\n      if (canceled || !_active) return;\n      var genericEventData = getGenericEventData(event);\n      if (genericEventData.touches !== 2 || event.timeStamp === timeStamp) return;\n\n      _this.updateSharedState(genericEventData);\n\n      var _getTwoTouchesEventDa2 = getTwoTouchesEventData(event),\n          values = _getTwoTouchesEventDa2.values,\n          origin = _getTwoTouchesEventDa2.origin;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics, {\n        origin: origin,\n        cancel: function cancel() {\n          return _this.onCancel();\n        }\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onPinchEnd = function (event) {\n      if (!_this.state.active) return;\n      _this.state._active = false;\n\n      _this.updateSharedState({\n        down: false,\n        touches: 0\n      });\n\n      _this.updateGestureState(_extends({\n        event: event\n      }, _this.getGenericPayload(event), {}, _this.getMovement(_this.state.values)));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onCancel = function () {\n      _this.state._active = false;\n\n      _this.updateGestureState({\n        canceled: true,\n        cancel: noop\n      });\n\n      _this.updateSharedState({\n        down: false,\n        touches: 0\n      });\n\n      requestAnimationFrame(function () {\n        return _this.fireGestureHandler();\n      });\n    };\n    /**\r\n     * PINCH WITH WEBKIT GESTURES\r\n     */\n\n\n    _this.onGestureStart = function (event) {\n      if (!_this.enabled) return;\n      event.preventDefault();\n\n      var _getWebkitGestureEven = getWebkitGestureEventValues(event),\n          values = _getWebkitGestureEven.values;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true));\n\n      _this.updateGestureState(_extends({}, startState, {}, _this.getMovement(values, startState), {\n        cancel: function cancel() {\n          return _this.onCancel();\n        }\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onGestureChange = function (event) {\n      var _this$state2 = _this.state,\n          canceled = _this$state2.canceled,\n          _active = _this$state2._active;\n      if (canceled || !_active) return;\n      event.preventDefault();\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var _getWebkitGestureEven2 = getWebkitGestureEventValues(event),\n          values = _getWebkitGestureEven2.values;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics, {\n        cancel: function cancel() {\n          return _this.onCancel();\n        }\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onGestureEnd = function (event) {\n      event.preventDefault();\n      if (!_this.state.active) return;\n      _this.state._active = false;\n\n      _this.updateSharedState({\n        down: false,\n        touches: 0\n      });\n\n      _this.updateGestureState(_extends({\n        event: event\n      }, _this.getGenericPayload(event), {}, _this.getMovement(_this.state.values)));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.updateTouchData = function (event) {\n      if (!_this.enabled || event.touches.length !== 2 || !_this.state._active) return;\n\n      var _getTwoTouchesEventDa3 = getTwoTouchesEventData(event),\n          origin = _getTwoTouchesEventDa3.origin;\n\n      _this.state.origin = origin;\n    };\n    /**\r\n     * PINCH WITH WHEEL\r\n     */\n\n\n    _this.wheelShouldRun = function (event) {\n      return _this.enabled && event.ctrlKey;\n    };\n\n    _this.getWheelValuesFromEvent = function (event) {\n      var _getWheelEventValues = getWheelEventValues(event),\n          _getWheelEventValues$ = _getWheelEventValues.values,\n          delta_d = _getWheelEventValues$[1];\n\n      var _this$state$values = _this.state.values,\n          prev_d = _this$state$values[0],\n          prev_a = _this$state$values[1];\n      var d = prev_d - delta_d;\n      var a = prev_a !== void 0 ? prev_a : 0;\n      return {\n        values: [d, a],\n        origin: [event.clientX, event.clientY],\n        delta: [0, delta_d]\n      };\n    };\n\n    _this.onWheel = function (event) {\n      if (!_this.wheelShouldRun(event)) return;\n\n      _this.clearTimeout();\n\n      _this.setTimeout(_this.onWheelEnd);\n\n      if (!_this.state._active) _this.onWheelStart(event);else _this.onWheelChange(event);\n    };\n\n    _this.onWheelStart = function (event) {\n      var _this$getWheelValuesF = _this.getWheelValuesFromEvent(event),\n          values = _this$getWheelValuesF.values,\n          delta = _this$getWheelValuesF.delta,\n          origin = _this$getWheelValuesF.origin;\n\n      if (!_this.controller.config.eventOptions.passive) {\n        event.preventDefault();\n      } else if (process.env.NODE_ENV === 'development') {\n        console.warn('To support zoom on trackpads, try using the `domTarget` option and `config.event.passive` set to `false`. This message will only appear in development mode.');\n      }\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true), {\n        initial: _this.state.values\n      });\n\n      _this.updateGestureState(_extends({}, startState, {}, _this.getMovement(values, startState), {\n        offset: values,\n        delta: delta,\n        origin: origin\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelChange = function (event) {\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var _this$getWheelValuesF2 = _this.getWheelValuesFromEvent(event),\n          values = _this$getWheelValuesF2.values,\n          origin = _this$getWheelValuesF2.origin,\n          delta = _this$getWheelValuesF2.delta;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics, {\n        origin: origin,\n        delta: delta\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelEnd = function () {\n      _this.state._active = false;\n\n      _this.updateGestureState(_this.getMovement(_this.state.values));\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = PinchRecognizer.prototype;\n\n  _proto.addBindings = function addBindings() {\n    // Only try to use gesture events when they are supported and domTarget is set\n    // as React doesn't support gesture handlers.\n    if (this.controller.config.domTarget && supportsGestureEvents()) {\n      this.controller.addBindings('onGestureStart', this.onGestureStart);\n      this.controller.addBindings('onGestureChange', this.onGestureChange);\n      this.controller.addBindings(['onGestureEnd', 'onTouchCancel'], this.onGestureEnd);\n      this.controller.addBindings(['onTouchStart', 'onTouchMove'], this.updateTouchData);\n    } else {\n      this.controller.addBindings('onTouchStart', this.onPinchStart);\n      this.controller.addBindings('onTouchMove', this.onPinchChange);\n      this.controller.addBindings(['onTouchEnd', 'onTouchCancel'], this.onPinchEnd);\n      this.controller.addBindings('onWheel', this.onWheel);\n    }\n  };\n\n  return PinchRecognizer;\n}(DistanceAngleRecognizer);\n/**\r\n * @public\r\n *\r\n * Pinch hook.\r\n *\r\n * @param {Handler<'pinch'>} handler - the function fired every time the pinch gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and pinch options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction usePinch(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      pinch = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    pinch: getInternalDistanceAngleOptions(pinch)\n  });\n\n  return useRecognizers({\n    pinch: handler\n  }, [PinchRecognizer], mergedConfig);\n}\n\nvar WheelRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(WheelRecognizer, _CoordinatesRecognize);\n\n  function WheelRecognizer(controller, args) {\n    var _this;\n\n    _this = _CoordinatesRecognize.call(this, 'wheel', controller, args) || this;\n    _this.ingKey = 'wheeling';\n    _this.debounced = true;\n\n    _this.wheelShouldRun = function (event) {\n      if (event.ctrlKey && 'pinch' in _this.controller.handlers) return false;\n      return _this.enabled;\n    };\n\n    _this.getValuesFromEvent = function (event) {\n      var prevValues = _this.state.values;\n\n      var _getWheelEventValues = getWheelEventValues(event),\n          values = _getWheelEventValues.values;\n\n      return {\n        values: addV(values, prevValues)\n      };\n    };\n\n    _this.onWheel = function (event) {\n      if (!_this.wheelShouldRun(event)) return;\n\n      _this.clearTimeout();\n\n      _this.setTimeout(_this.onWheelEnd);\n\n      if (!_this.state._active) _this.onWheelStart(event);else _this.onWheelChange(event);\n    };\n\n    _this.onWheelStart = function (event) {\n      var _this$getValuesFromEv = _this.getValuesFromEvent(event),\n          values = _this$getValuesFromEv.values;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true), {\n        initial: _this.state.values\n      });\n\n      var movementDetection = _this.getMovement(values, startState);\n\n      var delta = movementDetection.delta;\n\n      _this.updateGestureState(_extends({}, startState, {}, movementDetection, {\n        distance: calculateDistance(delta),\n        direction: calculateDirection(delta)\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelChange = function (event) {\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var _this$getValuesFromEv2 = _this.getValuesFromEvent(event),\n          values = _this$getValuesFromEv2.values;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onWheelEnd = function () {\n      _this.state._active = false;\n\n      _this.updateGestureState(_extends({}, _this.getMovement(_this.state.values), {\n        velocities: [0, 0],\n        velocity: 0\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = WheelRecognizer.prototype;\n\n  _proto.addBindings = function addBindings() {\n    this.controller.addBindings('onWheel', this.onWheel);\n  };\n\n  return WheelRecognizer;\n}(CoordinatesRecognizer);\n/**\r\n * @public\r\n *\r\n * Wheel hook.\r\n *\r\n * @param {Handler<'wheel'>} handler - the function fired every time the wheel gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and wheel options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useWheel(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      wheel = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    wheel: getInternalCoordinatesOptions(wheel)\n  });\n\n  return useRecognizers({\n    wheel: handler\n  }, [WheelRecognizer], mergedConfig);\n}\n\nvar MoveRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(MoveRecognizer, _CoordinatesRecognize);\n\n  function MoveRecognizer(controller, args) {\n    var _this;\n\n    _this = _CoordinatesRecognize.call(this, 'move', controller, args) || this;\n    _this.ingKey = 'moving';\n    _this.debounced = true;\n\n    _this.moveShouldRun = function () {\n      return _this.enabled;\n    };\n\n    _this.onMove = function (event) {\n      if (!_this.moveShouldRun()) return;\n\n      _this.clearTimeout();\n\n      _this.setTimeout(_this.onMoveEnd);\n\n      if (!_this.state._active) _this.onMoveStart(event);else _this.onMoveChange(event);\n    };\n\n    _this.onMoveStart = function (event) {\n      var _getPointerEventValue = getPointerEventValues(event),\n          values = _getPointerEventValue.values;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true));\n\n      _this.updateGestureState(_extends({}, startState, {}, _this.getMovement(values, startState)));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onMoveChange = function (event) {\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var _getPointerEventValue2 = getPointerEventValues(event),\n          values = _getPointerEventValue2.values;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onMoveEnd = function () {\n      _this.state._active = false;\n\n      _this.updateGestureState(_extends({}, _this.getMovement(_this.state.values), {\n        velocities: [0, 0],\n        velocity: 0\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onPointerEnter = function (event) {\n      _this.controller.state.shared.hovering = true;\n      if (!_this.controller.config.enabled) return;\n\n      if (_this.controller.config.hover.enabled) {\n        var _getPointerEventValue3 = getPointerEventValues(event),\n            values = _getPointerEventValue3.values;\n\n        var state = _extends({}, _this.controller.state.shared, {}, _this.state, {}, _this.getGenericPayload(event, true), {\n          values: values,\n          active: true,\n          hovering: true\n        });\n\n        _this.controller.handlers.hover(_extends({}, state, {}, _this.mapStateValues(state)));\n      }\n\n      if ('move' in _this.controller.handlers) _this.onMoveStart(event);\n    };\n\n    _this.onPointerLeave = function (event) {\n      _this.controller.state.shared.hovering = false;\n      if ('move' in _this.controller.handlers) _this.onMoveEnd();\n\n      if (_this.controller.config.hover.enabled) {\n        var _getPointerEventValue4 = getPointerEventValues(event),\n            values = _getPointerEventValue4.values;\n\n        var state = _extends({}, _this.controller.state.shared, {}, _this.state, {}, _this.getGenericPayload(event), {\n          values: values,\n          active: false\n        });\n\n        _this.controller.handlers.hover(_extends({}, state, {}, _this.mapStateValues(state)));\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = MoveRecognizer.prototype;\n\n  _proto.addBindings = function addBindings() {\n    if (this.controller.config.pointer) {\n      if ('move' in this.controller.handlers) {\n        this.controller.addBindings('onPointerMove', this.onMove);\n      }\n\n      if ('hover' in this.controller.handlers) {\n        this.controller.addBindings('onPointerEnter', this.onPointerEnter);\n        this.controller.addBindings('onPointerLeave', this.onPointerLeave);\n      }\n    } else {\n      if ('move' in this.controller.handlers) {\n        this.controller.addBindings('onMouseMove', this.onMove);\n      }\n\n      if ('hover' in this.controller.handlers) {\n        this.controller.addBindings('onMouseEnter', this.onPointerEnter);\n        this.controller.addBindings('onMouseLeave', this.onPointerLeave);\n      }\n    }\n  };\n\n  return MoveRecognizer;\n}(CoordinatesRecognizer);\n/**\r\n * @public\r\n *\r\n * Move hook.\r\n *\r\n * @param {Handler<'move'>} handler - the function fired every time the move gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and move options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useMove(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      move = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    move: getInternalCoordinatesOptions(move)\n  });\n\n  return useRecognizers({\n    move: handler\n  }, [MoveRecognizer], mergedConfig);\n}\n/**\r\n * @public\r\n *\r\n * Hover hook.\r\n *\r\n * @param {Handler<'hover'>} handler - the function fired every time the hover gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and hover options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useHover(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      hover = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    hover: _extends({\n      enabled: true\n    }, hover)\n  });\n\n  return useRecognizers({\n    hover: handler\n  }, [MoveRecognizer], mergedConfig);\n}\n\nvar ScrollRecognizer = /*#__PURE__*/function (_CoordinatesRecognize) {\n  _inheritsLoose(ScrollRecognizer, _CoordinatesRecognize);\n\n  function ScrollRecognizer(controller, args) {\n    var _this;\n\n    _this = _CoordinatesRecognize.call(this, 'scroll', controller, args) || this;\n    _this.ingKey = 'scrolling';\n    _this.debounced = true;\n\n    _this.scrollShouldRun = function () {\n      return _this.enabled;\n    };\n\n    _this.onScroll = function (event) {\n      if (!_this.scrollShouldRun()) return;\n\n      _this.clearTimeout();\n\n      _this.setTimeout(_this.onScrollEnd);\n\n      if (!_this.state._active) _this.onScrollStart(event);else _this.onScrollChange(event);\n    };\n\n    _this.onScrollStart = function (event) {\n      var _getScrollEventValues = getScrollEventValues(event),\n          values = _getScrollEventValues.values;\n\n      _this.updateSharedState(getGenericEventData(event));\n\n      var startState = _extends({}, _this.getStartGestureState(values, event), {}, _this.getGenericPayload(event, true), {\n        initial: _this.state.values\n      });\n\n      var movementDetection = _this.getMovement(values, startState);\n\n      var delta = movementDetection.delta;\n\n      _this.updateGestureState(_extends({}, startState, {}, movementDetection, {\n        distance: calculateDistance(delta),\n        direction: calculateDirection(delta)\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onScrollChange = function (event) {\n      var genericEventData = getGenericEventData(event);\n\n      _this.updateSharedState(genericEventData);\n\n      var _getScrollEventValues2 = getScrollEventValues(event),\n          values = _getScrollEventValues2.values;\n\n      var kinematics = _this.getKinematics(values, event);\n\n      _this.updateGestureState(_extends({}, _this.getGenericPayload(event), {}, kinematics));\n\n      _this.fireGestureHandler();\n    };\n\n    _this.onScrollEnd = function () {\n      _this.state._active = false;\n\n      _this.updateGestureState(_extends({}, _this.getMovement(_this.state.values), {\n        velocities: [0, 0],\n        velocity: 0\n      }));\n\n      _this.fireGestureHandler();\n    };\n\n    return _this;\n  }\n\n  var _proto = ScrollRecognizer.prototype;\n\n  _proto.addBindings = function addBindings() {\n    this.controller.addBindings('onScroll', this.onScroll);\n  };\n\n  return ScrollRecognizer;\n}(CoordinatesRecognizer);\n/**\r\n * @public\r\n *\r\n * Scroll hook.\r\n *\r\n * @param {Handler<'scroll'>} handler - the function fired every time the scroll gesture updates\r\n * @param {(Config | {})} [config={}] - the config object including generic options and scroll options\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useScroll(handler, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _config = config,\n      domTarget = _config.domTarget,\n      eventOptions = _config.eventOptions,\n      window = _config.window,\n      scroll = _objectWithoutPropertiesLoose(_config, [\"domTarget\", \"eventOptions\", \"window\"]);\n  /**\r\n   * TODO: at the moment we recompute the config object at every render\r\n   * this could probably be optimized\r\n   */\n\n\n  var mergedConfig = _extends({}, getInternalGenericOptions({\n    domTarget: domTarget,\n    eventOptions: eventOptions,\n    window: window\n  }), {\n    scroll: getInternalCoordinatesOptions(scroll)\n  });\n\n  return useRecognizers({\n    scroll: handler\n  }, [ScrollRecognizer], mergedConfig);\n}\n/**\r\n * @public\r\n *\r\n * The most complete gesture hook, allowing support for multiple gestures.\r\n *\r\n * @param {UserHandlersPartial} handlers - an object with on[Gesture] keys containg gesture handlers\r\n * @param {UseGestureConfig} [config={}] - the full config object\r\n * @returns {(...args: any[]) => HookReturnType<Config>}\r\n */\n\n\nfunction useGesture(handlers, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  /**\r\n   * If handlers contains {onDragStart, onDrag, onDragEnd, onMoveStart, onMove}\r\n   * actions will include 'onDrag' and 'onMove.\r\n   */\n\n\n  var _React$useState = React.useState(function () {\n    return new Set(Object.keys(handlers).map(function (k) {\n      return k.replace(/End|Start/, '');\n    }));\n  }),\n      actions = _React$useState[0];\n  /**\r\n   * Here we compute the derived internal config based on the provided config object.\r\n   * We decompose the config into its generic and gesture options and compute each.\r\n   * TODO: this is currently done on every render!\r\n   */\n\n\n  var _config = config,\n      drag = _config.drag,\n      wheel = _config.wheel,\n      move = _config.move,\n      scroll = _config.scroll,\n      pinch = _config.pinch,\n      hover = _config.hover,\n      restConfig = _objectWithoutPropertiesLoose(_config, [\"drag\", \"wheel\", \"move\", \"scroll\", \"pinch\", \"hover\"]);\n\n  var mergedConfig = getInternalGenericOptions(restConfig);\n  var classes = [];\n  var internalHandlers = {}; // will hold reference to native handlers such as onClick, onMouseDown, etc.\n\n  var _nativeHandlers = _extends({}, handlers);\n\n  if (actions.has('onDrag')) {\n    classes.push(DragRecognizer);\n    internalHandlers.drag = includeStartEndHandlers(handlers, 'onDrag', _nativeHandlers);\n    mergedConfig.drag = getInternalDragOptions(drag);\n  }\n\n  if (actions.has('onWheel')) {\n    classes.push(WheelRecognizer);\n    internalHandlers.wheel = includeStartEndHandlers(handlers, 'onWheel', _nativeHandlers);\n    mergedConfig.wheel = getInternalCoordinatesOptions(wheel);\n  }\n\n  if (actions.has('onScroll')) {\n    classes.push(ScrollRecognizer);\n    internalHandlers.scroll = includeStartEndHandlers(handlers, 'onScroll', _nativeHandlers);\n    mergedConfig.scroll = getInternalCoordinatesOptions(scroll);\n  }\n\n  if (actions.has('onMove')) {\n    classes.push(MoveRecognizer);\n    internalHandlers.move = includeStartEndHandlers(handlers, 'onMove', _nativeHandlers);\n    mergedConfig.move = getInternalCoordinatesOptions(move);\n  }\n\n  if (actions.has('onPinch')) {\n    classes.push(PinchRecognizer);\n    internalHandlers.pinch = includeStartEndHandlers(handlers, 'onPinch', _nativeHandlers);\n    mergedConfig.pinch = getInternalDistanceAngleOptions(pinch);\n  }\n\n  if (actions.has('onHover')) {\n    if (!actions.has('onMove')) classes.push(MoveRecognizer);\n    internalHandlers.hover = handlers.onHover;\n    mergedConfig.hover = _extends({\n      enabled: true\n    }, hover);\n    delete _nativeHandlers.onHover;\n  }\n\n  return useRecognizers(internalHandlers, classes, mergedConfig, _nativeHandlers);\n}\n/**\r\n * @private\r\n *\r\n * This utility function will integrate start and end handlers into the regular\r\n * handler function by using first and last conditions.\r\n *\r\n * @param {UserHandlersPartial} handlers - the handlers function object\r\n * @param {HandlerKey} handlerKey - the key for which to integrate start and end handlers\r\n * @returns\r\n */\n\n\nfunction includeStartEndHandlers(handlers, handlerKey, _nativeHandlers) {\n  var startKey = handlerKey + 'Start';\n  var endKey = handlerKey + 'End';\n  delete _nativeHandlers[handlerKey];\n  delete _nativeHandlers[startKey];\n  delete _nativeHandlers[endKey];\n\n  var fn = function fn(state) {\n    var memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n\n  return fn;\n}\n\nexport { addV, rubberbandIfOutOfBounds, subV, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };","import React from 'react';\nimport styled from 'styled-components';\n// import { useSpring, animated, to } from 'react-spring'\nimport { useGesture } from 'react-use-gesture'\n\nconst StarsContainer = styled.div`\n  width: 100%;\n  height: 100vh;\n  background-color: ${props => props.theme.colors.black};\n  background-image: radial-gradient(\n      circle at top right,\n      rgba(121, 68, 154, 0.13),\n      transparent\n    ),\n    radial-gradient(circle at 20% 80%, rgba(41, 196, 255, 0.13), transparent);\n`;\n\ntype Coordinates = {\n  x: number | null;\n  y: number | null;\n};\n\ntype Star = {\n  x: number;\n  y: number;\n  z: number;\n};\n\nconst Stars: React.FC = () => {\n  const domTarget = React.useRef(null)\n  const bind = useGesture(\n    {\n      // onDragStart: () => setDrag(true),\n      // onDrag: ({ offset: [x, y] }) => set({ x, y, rotateX: 0, rotateY: 0, scale: 1 }),\n      // onDragEnd: () => setDrag(false),\n      onPinch: ({ offset: [d, a] }) => accelerate(true),\n      // onMove: ({ xy: [px, py], dragging }) => !dragging && set({ rotateX: calcX(py, y.get()), rotateY: calcY(px, x.get()), scale: 1.1 }),\n      // onHover: ({ hovering }) => !hovering && set({ rotateX: 0, rotateY: 0, scale: 1 }),\n      // onWheel: ({ offset: [, y] }) => setWheel({ wheelY: y })\n    },\n    { domTarget, eventOptions: { passive: false } }\n  )\n  React.useEffect(bind, [bind])\n\n  const starsNumber =\n    typeof window !== 'undefined' &&\n    (window.innerWidth + window.innerHeight) / 8;\n  const starSize = 3;\n  const starMinScale = 0.2;\n  const overflowThreshold = 50;\n\n  let scale = 1; // device/pixel ratio\n  let windowWidth: number;\n  let windowHeight: number;\n\n  const stars: Star[] = [];\n  let cursorInsideCanvas = false;\n  let pointer: Coordinates = {x: null, y: null};\n  let pointerActive = true;\n\n  const normalVelocity = 0.0005;\n  const maxVelocity = 0.1;\n  const velocity = {x: 0, y: 0, tx: 0, ty: 0, z: normalVelocity};\n\n  const generateStars = () => {\n    for (let i = 0; i < starsNumber; i++) {\n      stars.push({\n        x: 0,\n        y: 0,\n        z: starMinScale + Math.random() * (1 - starMinScale)\n      });\n    }\n  };\n\n  const recycleStar = (star: Star) => {\n    let direction = 'z';\n\n    const vx = Math.abs(velocity.x),\n      vy = Math.abs(velocity.y);\n\n    if (vx > 1 || vy > 1) {\n      let axis;\n\n      if (vx > vy) {\n        axis = Math.random() < vx / (vx + vy) ? 'h' : 'v';\n      } else {\n        axis = Math.random() < vy / (vx + vy) ? 'v' : 'h';\n      }\n\n      if (axis === 'h') {\n        direction = velocity.x > 0 ? 'l' : 'r';\n      } else {\n        direction = velocity.y > 0 ? 't' : 'b';\n      }\n    }\n\n    star.z = starMinScale + Math.random() * (1 - starMinScale);\n\n    if (direction === 'z') {\n      star.x = Math.random() * windowWidth;\n      star.y = Math.random() * windowHeight;\n      star.z = 0.1;\n    } else if (direction === 'l') {\n      star.x = -overflowThreshold;\n      star.y = windowHeight * Math.random();\n    } else if (direction === 'r') {\n      star.x = windowWidth + overflowThreshold;\n      star.y = windowHeight * Math.random();\n    } else if (direction === 't') {\n      star.x = windowWidth * Math.random();\n      star.y = -overflowThreshold;\n    } else if (direction === 'b') {\n      star.x = windowWidth * Math.random();\n      star.y = windowHeight + overflowThreshold;\n    }\n  };\n\n  const placeStars = () => {\n    stars.forEach((star: Star) => {\n      star.x = Math.random() * windowWidth;\n      star.y = Math.random() * windowHeight;\n    });\n  };\n\n  const movePointer = (userPositionX: number, userPositionY: number) => {\n    if(!pointerActive) return;\n    if (typeof pointer.x === 'number' && typeof pointer.y === 'number') {\n      const ox = userPositionX - pointer.x,\n        oy = userPositionY - pointer.y;\n\n      velocity.tx =\n        velocity.tx - (ox / 8 * scale) * (cursorInsideCanvas ? 1 : -1);\n      velocity.ty =\n        velocity.ty - (oy / 8 * scale) * (cursorInsideCanvas ? 1 : -1);\n    }\n\n    pointer = {x: userPositionX, y: userPositionY};\n  };\n\n  const resizeCanvas = (canvas: any) => {\n    scale = window.devicePixelRatio || 1;\n\n    windowWidth = window.innerWidth * scale;\n    windowHeight = window.innerHeight * scale;\n\n    canvas.width = windowWidth;\n    canvas.height = windowHeight;\n\n    placeStars();\n  };\n\n  const accelerate = (acceleration: boolean) => {\n    pointer = {x: null, y: null};\n    pointerActive = !acceleration;\n    velocity.z = acceleration? maxVelocity : normalVelocity;\n  };\n\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n  const [context, setContext] = React.useState<CanvasRenderingContext2D | null>(\n    null\n  );\n\n  React.useEffect(() => {\n    const handleMouseMove = (event: MouseEvent) => {\n      cursorInsideCanvas = true;\n      movePointer(event.clientX, event.clientY);\n    };\n\n    const handleTouchMove = (event: TouchEvent) => {\n      cursorInsideCanvas = true;\n      movePointer(event.touches[0].clientX, event.touches[0].clientY);\n      event.preventDefault();\n    };\n\n    const handleMouseLeave = () => {\n      cursorInsideCanvas = false;\n      pointer = {x: null, y: null};\n    };\n\n    const handleTouchLeave = () => {\n      cursorInsideCanvas = false;\n      pointer = {x: null, y: null};\n    };\n\n    const handleResize = () => {\n      resizeCanvas(canvasRef.current);\n    };\n\n    const handleWheel = (event: WheelEvent) => {\n      accelerate(event.deltaY < 0);\n    };\n    // const handleMouseDown = (event: MouseEvent)=> {\n    //   cursorInsideCanvas = true;\n    // }\n\n    // const handleMouseUp = (event: MouseEvent)=> {\n    //   cursorInsideCanvas = false;\n    // }\n\n    if (canvasRef.current) {\n      const renderCtx = canvasRef.current.getContext('2d');\n\n      if (renderCtx) {\n        // canvas.onmousemove = onMouseMove;\n        // canvas.ontouchmove = onTouchMove;\n        // canvas.ontouchend = onMouseLeave;\n        // document.onmouseleave = onMouseLeave;\n        window.addEventListener('wheel', handleWheel);\n        window.addEventListener('resize', handleResize);\n        canvasRef.current.addEventListener('mousemove', handleMouseMove);\n        canvasRef.current.addEventListener('touchmove', handleTouchMove);\n        canvasRef.current.addEventListener('touchend', handleTouchLeave);\n        document.addEventListener('mouseleave', handleMouseLeave);\n\n        // canvasRef.current.addEventListener('mouseup', handleMouseUp);\n        // canvasRef.current.addEventListener('mousedown', handleMouseDown);\n\n        // canvasOffsetLeft = canvasRef.current.offsetLeft;\n        // canvasOffsetTop = canvasRef.current.offsetTop;\n\n        setContext(renderCtx);\n      }\n    }\n\n    if (context) {\n      const renderStars = () => {\n        stars.forEach(star => {\n          context.beginPath();\n          context.lineCap = 'round';\n          context.lineWidth = starSize * star.z * scale;\n          context.strokeStyle =\n            'rgba(255,255,255,' + (0.5 + 0.5 * Math.random()) + ')';\n\n          context.beginPath();\n          context.moveTo(star.x, star.y);\n\n          let tailX = velocity.x * 2,\n            tailY = velocity.y * 2;\n\n          // stroke() wont work on an invisible line\n          if (Math.abs(tailX) < 0.1) tailX = 0.5;\n          if (Math.abs(tailY) < 0.1) tailY = 0.5;\n\n          context.lineTo(star.x + tailX, star.y + tailY);\n\n          context.stroke();\n        });\n      };\n\n      const update = () => {\n        velocity.tx *= 0.96;\n        velocity.ty *= 0.96;\n\n        velocity.x += (velocity.tx - velocity.x) * 0.8;\n        velocity.y += (velocity.ty - velocity.y) * 0.8;\n\n        stars.forEach(star => {\n          star.x += velocity.x * star.z;\n          star.y += velocity.y * star.z;\n\n          star.x += (star.x - windowWidth / 2) * velocity.z * star.z;\n          star.y += (star.y - windowHeight / 2) * velocity.z * star.z;\n          star.z += velocity.z;\n\n          // recycle when out of bounds\n          if (\n            star.x < -overflowThreshold ||\n            star.x > windowWidth + overflowThreshold ||\n            star.y < -overflowThreshold ||\n            star.y > windowHeight + overflowThreshold\n          ) {\n            recycleStar(star);\n          }\n        });\n      };\n\n      const step = () => {\n        context.clearRect(0, 0, windowWidth, windowHeight);\n\n        update();\n        renderStars();\n\n        requestAnimationFrame(step);\n      };\n\n      generateStars();\n      resizeCanvas(canvasRef.current);\n      step();\n    }\n\n    const cleanup = () => {\n      stars.length = 0;\n      if (canvasRef.current) {\n        window.removeEventListener('wheel', handleWheel);\n        window.removeEventListener('resize', handleResize);\n        canvasRef.current.removeEventListener('mousemove', handleMouseMove);\n        canvasRef.current.removeEventListener('touchmove', handleTouchMove);\n        canvasRef.current.removeEventListener('touchend', handleTouchLeave);\n        document.removeEventListener('mouseleave', handleMouseLeave);\n      }\n    };\n    return cleanup;\n  }, [context]);\n\n  return (\n    <StarsContainer>\n      <canvas\n        id=\"canvas\"\n        ref={canvasRef}\n        style={{\n          position: 'fixed',\n          width: '100%',\n          height: '100%'\n        }}\n      />\n    </StarsContainer>\n  );\n};\n\nexport default Stars;\n","import React from 'react';\nimport {graphql} from 'gatsby';\nimport Intro from '../components/Intro';\nimport Head from '../components/Head';\nimport Layout from '../components/Layout';\nimport Stars from '../components/Stars';\n\ninterface IndexProps {\n  readonly data: PageQueryData;\n}\n\nconst Index: React.FC<IndexProps> = ({data}) => {\n  const siteTitle: string = data.site.siteMetadata.title;\n\n  return (\n    <Layout title={siteTitle}>\n      <Stars />\n      <Head\n        title=\"Home\"\n        keywords={[\n          `blog`,\n          `gatsby`,\n          `typescript`,\n          `javascript`,\n          `portfolio`,\n          `react`\n        ]}\n      />\n      <section>\n        <Intro fixed={true} />\n      </section>\n    </Layout>\n  );\n};\n\ninterface PageQueryData {\n  site: {\n    siteMetadata: {\n      title: string;\n    };\n  };\n}\n\nexport const pageQuery = graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n  }\n`;\n\nexport default Index;\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n","// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n"],"sourceRoot":""}